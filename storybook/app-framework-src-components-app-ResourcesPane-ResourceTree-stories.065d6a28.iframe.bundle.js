/*! For license information please see app-framework-src-components-app-ResourcesPane-ResourceTree-stories.065d6a28.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_datashaper_stories=self.webpackChunk_datashaper_stories||[]).push([[450],{"../../.yarn/__virtual__/@essex-components-virtual-02ce782154/0/cache/@essex-components-npm-3.6.15-62a7d1dd7b-595324c0c2.zip/node_modules/@essex/components/dist/hooks/fluent8/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J5:()=>SMALL_FONT_SIZE,eC:()=>SMALL_THUMB_SIZE,st:()=>SMALL_INPUT_HEIGHT,wA:()=>SMALL_PILL_SIZE});const SMALL_FONT_SIZE=12,SMALL_THUMB_SIZE=8,SMALL_PILL_SIZE=SMALL_THUMB_SIZE+4,SMALL_INPUT_HEIGHT=24},"../../.yarn/__virtual__/@essex-components-virtual-02ce782154/0/cache/@essex-components-npm-3.6.15-62a7d1dd7b-595324c0c2.zip/node_modules/@essex/components/dist/hooks/fluent8/dropdown.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>useDropdownProps});var lodash_es_merge_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-05cbffad6e.zip/node_modules/lodash-es/merge.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../.yarn/__virtual__/@essex-components-virtual-02ce782154/0/cache/@essex-components-npm-3.6.15-62a7d1dd7b-595324c0c2.zip/node_modules/@essex/components/dist/hooks/fluent8/constants.js");function useDropdownProps(props,size="medium"){const styles=function useStyles(styles,size="medium"){const sizedBase=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{if("small"===size)return{root:{fontSize:_constants_js__WEBPACK_IMPORTED_MODULE_2__.J5},label:{fontSize:_constants_js__WEBPACK_IMPORTED_MODULE_2__.J5,height:_constants_js__WEBPACK_IMPORTED_MODULE_2__.st},dropdown:item,dropdownItem:item,dropdownItemHeader:item,dropdownItemDisabled:item,dropdownItemSelected:item,dropdownItemSelectedAndDisabled:item,title:{...item,paddingTop:3,lineHeight:16},caretDown:{...item,fontSize:10,paddingTop:3,lineHeight:16},caretDownWrapper:{...item,right:6}}}),[size]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>(0,lodash_es_merge_js__WEBPACK_IMPORTED_MODULE_1__.Z)(sizedBase,styles)),[styles,sizedBase])}(props.styles,size);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>(0,lodash_es_merge_js__WEBPACK_IMPORTED_MODULE_1__.Z)({styles},props)),[styles,props])}const item={fontSize:_constants_js__WEBPACK_IMPORTED_MODULE_2__.J5,height:_constants_js__WEBPACK_IMPORTED_MODULE_2__.st,minHeight:_constants_js__WEBPACK_IMPORTED_MODULE_2__.st,lineHeight:_constants_js__WEBPACK_IMPORTED_MODULE_2__.st}},"../app-framework/src/components/app/ResourcesPane/ResourceTree.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ResourceTreeStory:()=>ResourceTreeStory,default:()=>ResourceTree_stories});var CommandBarSection,ResourceGroupType,ResourceTreeViewMode,jsx_runtime=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js");!function(CommandBarSection){CommandBarSection.New="newMenu",CommandBarSection.Open="openMenu",CommandBarSection.Save="saveMenu"}(CommandBarSection||(CommandBarSection={})),function(ResourceGroupType){ResourceGroupType.Data="data",ResourceGroupType.Apps="apps"}(ResourceGroupType||(ResourceGroupType={})),function(ResourceTreeViewMode){ResourceTreeViewMode.Expanded="expanded",ResourceTreeViewMode.Collapsed="collapsed",ResourceTreeViewMode.Hidden="hidden"}(ResourceTreeViewMode||(ResourceTreeViewMode={}));const rkey="";function useTreeItemGroups(items,groups,selectedKey,onItemClick,onItemExpandClick){const expansion=function useExpansion(items,selectedKey){const defaultExpansion=(0,react.useMemo)((()=>function forceExpansionToSelected(items,selectedKey){const collect=(children,parentKey)=>children.map((child=>{if(child.children){const childKeys=collect(child.children,child.key);if(childKeys.length>0)return[child.key,...childKeys]}return child.expanded?[child.key]:child.selected||child.key===selectedKey?[parentKey]:[]})).flatMap((key=>key));return collect(items).reduce(((acc,cur)=>(acc[cur]=!0,acc)),{})}(items,selectedKey)),[items,selectedKey]),[expandMap,setExpandMap]=(0,react.useState)(defaultExpansion);return(0,react.useMemo)((()=>({is:key=>expandMap[key],on:key=>setExpandMap((prev=>({...prev,[key]:!prev[key]})))})),[expandMap,setExpandMap])}(items,selectedKey);return(0,react.useMemo)((()=>{const collected=function collectItemsByGroup(items){return items.reduce(((acc,cur)=>{const group=cur.group||rkey,g=acc.get(group)||[];return g.push(cur),acc.set(group,g),acc}),new Map([[rkey,[]]]))}(items);return[...groups||[],{key:rkey}].map((group=>({...group,items:makeDetailedItems(collected.get(group.key)||[],0,expansion,selectedKey,onItemClick,onItemExpandClick)})))}),[items,groups,expansion,selectedKey,onItemClick,onItemExpandClick])}function makeDetailedItems(items,depth,expansion,selectedKey,onItemClick,onItemExpandClick){return items.map((item=>{const{children,onClick,onExpand,selected:itemSelected,expanded,...rest}=item,selected=itemSelected||item.key===selectedKey||selectedKey?.startsWith(`${item.key}/`),base={...rest,depth,selected:selected||itemSelected,expanded:expanded||expansion.is(item.key),onExpand:itm=>{expansion.on(itm.key),onExpand?onExpand(itm):onItemExpandClick&&onItemExpandClick(itm)},onClick:onClick||onItemClick?itm=>{onClick?onClick(itm):onItemClick&&onItemClick(itm)}:void 0};return children&&(base.children=makeDetailedItems(children,depth+1,expansion,selectedKey,onItemClick,onItemExpandClick)),base}))}var lib_commonjs=__webpack_require__("../../.yarn/__virtual__/@fluentui-react-virtual-7da69edcc6/0/cache/@fluentui-react-npm-8.107.4-ae21e89d91-f2b7fa2ca6.zip/node_modules/@fluentui/react/lib-commonjs/index.js"),merge=__webpack_require__("../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-05cbffad6e.zip/node_modules/lodash-es/merge.js");function useTreeStyles(styles,size="medium"){const theme=(0,lib_commonjs.useTheme)();return(0,react.useMemo)((()=>{const base={root:{display:"flex",flexDirection:"column",gap:24},list:{padding:0,margin:0,listStyleType:"none"},group:{display:"flex",flexDirection:"column"},groupHeader:{fontSize:12,padding:4,fontWeight:"bold",color:theme.palette.neutralSecondary,background:theme.palette.neutralLighterAlt,borderTop:"1px solid",borderBottom:"1px solid",borderColor:theme.palette.neutralTertiaryAlt}},small="small"===size&&{groupHeader:{fontSize:10}};return(0,merge.Z)(base,small,styles)}),[theme,styles,size])}const transparentBackgroundButtonStyles=["root","rootFocused","rootHovered","rootPressed"].reduce(((acc,cur)=>(acc[cur]={background:"transparent"},acc)),{});function useHierarchyBoxStyle(size="medium"){return(0,react.useMemo)((()=>({height:"100%",minHeight:"medium"===size?32:24,display:"flex",flexDirection:"column",justifyContent:"flex-start"})),[size])}function useExpandIconButtonProps(item,props,size="medium"){const buttonStyles=function useExpandIconButtonStyles(size="medium"){return(0,react.useMemo)((()=>{const base={root:{borderRadius:0,padding:0,margin:0,width:16,height:16}},small="small"===size&&{root:{width:12,height:12}};return(0,merge.Z)(base,small,transparentBackgroundButtonStyles)}),[size])}(size),iconStyles=function useExpandIconIconStyles(size="medium"){const theme=(0,lib_commonjs.useTheme)();return(0,react.useMemo)((()=>({root:{color:theme.palette.neutralPrimaryAlt,fontSize:"medium"===size?8:6}})),[theme,size])}(size);return(0,react.useMemo)((()=>(0,merge.Z)({iconProps:{iconName:item.expanded?props?.collapseIconName||"ChevronDown":props?.expandIconName||"ChevronRight",onClick:()=>item.onExpand?.(item),styles:iconStyles},styles:buttonStyles},props)),[item,iconStyles,buttonStyles,props])}function useContentButtonProps(item,props,size="medium"){const buttonStyles=function useContentButtonStyles(item,size="medium"){return(0,react.useMemo)((()=>{const base={root:{border:"none",borderRadius:0,textAlign:"left",padding:0,margin:0,width:"100%",minWidth:"unset",cursor:item.onClick?"pointer":"default"},flexContainer:{justifyContent:"flex-start",gap:4},label:{fontWeight:item.selected?"bold":"normal",whiteSpace:"nowrap",margin:0}},small="small"===size&&{root:{height:24,fontSize:12}};return(0,merge.Z)(base,small,transparentBackgroundButtonStyles)}),[item,size])}(item,size),iconStyles=function useContentIconStyles(size="medium"){return(0,react.useMemo)((()=>{const base={root:{fontSize:16,margin:0,width:18,minWidth:18}},small="small"===size&&{root:{fontSize:14,width:16,minWidth:16}};return(0,merge.Z)(base,small)}),[size])}(size);return(0,react.useMemo)((()=>(0,merge.Z)({styles:buttonStyles,iconProps:{iconName:item.iconName,styles:iconStyles}},props)),[item,buttonStyles,iconStyles,props])}function useMenuButtonProps(item,hovered,props,size="medium"){const[open,setOpen]=(0,react.useState)(!1),onMenuClick=(0,react.useCallback)(((...args)=>{setOpen(!0),props?.onMenuClick?.(...args)}),[setOpen,props]),onAfterMenuDismiss=(0,react.useCallback)((()=>{setOpen(!1),props?.onAfterMenuDismiss?.()}),[setOpen,props]),shown=hovered||open||props?.alwaysVisible,buttonStyles=function useMenuButtonStyles(size="medium"){return(0,react.useMemo)((()=>{const base={root:{borderRadius:0,width:32,minWidth:32,height:32}},small="small"===size&&{root:{width:24,minWidth:24,height:24,fontSize:12}};return(0,merge.Z)(base,small,transparentBackgroundButtonStyles)}),[size])}(size),menuItemsStyles=function useMenuItemsStyles(size="medium"){return(0,react.useMemo)((()=>"small"===size?{subComponentStyles:{menuItem:{root:{fontSize:12,height:24},icon:{fontSize:12}}}}:{}),[size])}(size);return(0,react.useMemo)((()=>{if(item.menuItems){const base={styles:buttonStyles,menuProps:{items:item.menuItems,styles:menuItemsStyles}};return(0,merge.Z)(base,props,{menuIconProps:{iconName:shown?props?.menuIconProps?.iconName||"MoreVertical":""},onMenuClick,onAfterMenuDismiss})}}),[item,shown,buttonStyles,menuItemsStyles,onMenuClick,onAfterMenuDismiss,props])}const TreeItem=(0,react.memo)((function TreeItem(props){const{item,styles,expandButtonProps,menuButtonProps,size,narrow}=props,_styles=function useTreeItemStyles(item,styles,size="medium",narrow=!1){const theme=(0,lib_commonjs.useTheme)();return(0,react.useMemo)((()=>{const depth=item.depth||0,base={list:{padding:0,margin:0,listStyleType:"none"},listItem:{width:"100%"},listItemContent:{display:"flex",alignItems:"center"},flexContainer:{width:"100%",display:"flex",alignItems:"center",overflow:"hidden",paddingLeft:0===depth?0:8+14*(depth-1)},hierarchyLine:{width:item.children?6:22,minWidth:item.children?6:22,height:16,borderLeft:"1px solid",borderBottom:"1px solid",borderColor:theme.palette.neutralLight},depthTicks:{width:3,minWidth:3,height:1,background:theme.palette.neutralSecondaryAlt},pill:{marginLeft:2,marginRight:2,width:4,background:item.selected?theme.palette.themePrimary:"transparent",height:14,borderRadius:8}},small="small"===size&&{flexContainer:{paddingLeft:0===depth?0:6+12*(depth-1)},hierarchyLine:{width:item.children?6:18,minWidth:item.children?6:18,height:12},indicator:{width:2,borderRadius:4}},narrowed=narrow&&{flexContainer:{paddingLeft:0}};return(0,merge.Z)(base,small,narrowed,styles)}),[theme,styles,item,size,narrow])}(item,styles,size,narrow),_expandButtonProps=useExpandIconButtonProps(item,expandButtonProps,size),{listItemContentStyles,hovered,onMouseEnter,onMouseLeave}=function useItemHoverInteraction(item,styles){const theme=(0,lib_commonjs.useTheme)(),[hovered,setHovered]=(0,react.useState)(!1),onMouseEnter=(0,react.useCallback)((()=>setHovered(!0)),[setHovered]),onMouseLeave=(0,react.useCallback)((()=>setHovered(!1)),[setHovered]);return{listItemContentStyles:(0,react.useMemo)((()=>({background:hovered?theme.palette.neutralLighterAlt:item.selected?theme.palette.neutralLighter:"unset",...styles.listItemContent})),[theme,styles,item,hovered]),hovered,onMouseEnter,onMouseLeave}}(item,_styles),_menuButtonProps=useMenuButtonProps(item,hovered,menuButtonProps,size),Indicator=narrow?DepthIndicator:HiearchyIndicator;return(0,jsx_runtime.jsx)(TooltipWrapper,{...props,children:(0,jsx_runtime.jsxs)("li",{"data-testid":"essex-tree-item",style:_styles.listItem,children:[(0,jsx_runtime.jsxs)("div",{style:listItemContentStyles,onMouseEnter,onMouseLeave,children:[(0,jsx_runtime.jsx)("div",{style:_styles.pill}),(0,jsx_runtime.jsxs)("div",{style:_styles.flexContainer,children:[(0,jsx_runtime.jsx)(Indicator,{...props,styles:_styles}),(item.children||item.onRenderContent)&&!narrow&&(0,jsx_runtime.jsx)(lib_commonjs.IconButton,{..._expandButtonProps}),renderTitle(props),item.menuItems&&(0,jsx_runtime.jsx)(lib_commonjs.IconButton,{..._menuButtonProps})]})]}),(item.expanded||narrow)&&(0,jsx_runtime.jsx)("ul",{style:_styles.list,children:contentRenderer(props)})]},`tree-item-li-${item.key}`)})})),TooltipWrapper=props=>{const{narrow,item,children}=props;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:narrow?(0,jsx_runtime.jsx)(lib_commonjs.TooltipHost,{id:`tooltip-${item.key}`,content:item.text,directionalHint:lib_commonjs.DirectionalHint.rightTopEdge,calloutProps:{gapSpace:4},children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})})},HiearchyIndicator=(0,react.memo)((function HiearchyIndicator(props){const{item,size,styles}=props,boxStyle=useHierarchyBoxStyle(size);return 0===item.depth?null:(0,jsx_runtime.jsx)("div",{style:boxStyle,children:(0,jsx_runtime.jsx)("div",{style:styles?.hierarchyLine})})})),DepthIndicator=(0,react.memo)((function DepthIndicator(props){const{item,size,styles}=props,boxStyle=function useDepthTicksBoxStyle(size="medium"){const box=useHierarchyBoxStyle(size);return(0,react.useMemo)((()=>({...box,justifyContent:"center",gap:2,marginRight:2})),[box])}(size),ticks=(0,react.useMemo)((()=>new Array((item.depth||0)+1).fill(1).map(((_,i)=>(0,jsx_runtime.jsx)("div",{style:styles?.depthTicks},`depth-tick-${item.key}-${i}`)))),[item,styles]);return(0,jsx_runtime.jsx)("div",{style:boxStyle,children:ticks})})),TreeItemTitle=(0,react.memo)((function TreeItemTitle(props){const{item,contentButtonProps,size}=props,_contentButtonProps=useContentButtonProps(item,contentButtonProps,size),handleClick=(0,react.useCallback)((()=>{item.onClick?.(item)}),[item]);return(0,jsx_runtime.jsx)(lib_commonjs.DefaultButton,{..._contentButtonProps,onClick:handleClick,children:item.text})})),TreeItemContent=(0,react.memo)((function TreeItemTitle(props){const{item,styles,expandButtonProps,contentButtonProps,menuButtonProps,size,narrow}=props;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:item.children?.map((child=>(0,jsx_runtime.jsx)(TreeItem,{item:child,styles,expandButtonProps,contentButtonProps,menuButtonProps,size,narrow},child.key)))})})),defaultTitleRenderer=props=>props?(0,jsx_runtime.jsx)(TreeItemTitle,{...props}):null,renderTitle=props=>props?.item.onRenderTitle?props.item.onRenderTitle(props,defaultTitleRenderer):defaultTitleRenderer(props),defaultContentRenderer=props=>props?(0,jsx_runtime.jsx)(TreeItemContent,{...props}):null,contentRenderer=props=>props?.item.onRenderContent?props.item.onRenderContent(props,defaultContentRenderer):defaultContentRenderer(props),Tree=(0,react.memo)((function Tree({items,groups,selectedKey,onItemClick,onItemExpandClick,styles,expandButtonProps,contentButtonProps,menuButtonProps,size="medium",onRenderGroupHeader,narrow=!1}){const _styles=useTreeStyles(styles,size),treeGroups=useTreeItemGroups(items,groups,selectedKey,onItemClick,onItemExpandClick);return(0,jsx_runtime.jsx)("div",{"data-testid":"essex-tree",style:_styles.root,children:treeGroups.map((group=>(0,jsx_runtime.jsx)("div",{style:_styles.group,children:(0,jsx_runtime.jsxs)("ul",{style:_styles.list,children:[groupHeaderRenderer({group,styles,size,onRenderGroupHeader}),group.items.map((item=>(0,jsx_runtime.jsx)(TreeItem,{item,styles,expandButtonProps,contentButtonProps,menuButtonProps,size,narrow},item.key)))]})},`tree-group-${group.key}`)))})})),TreeGroupHeader=(0,react.memo)((function TreeGroupHeader(props){const{group,styles,size}=props,_styles=useTreeStyles(styles,size);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:group.text&&(0,jsx_runtime.jsx)("div",{style:_styles.groupHeader,title:group.text,children:group.text})})})),defaultGroupHeaderRenderer=props=>props?(0,jsx_runtime.jsx)(TreeGroupHeader,{...props}):null,groupHeaderRenderer=props=>props?.onRenderGroupHeader?props.onRenderGroupHeader(props,defaultGroupHeaderRenderer):defaultGroupHeaderRenderer(props);var react_if_esm=__webpack_require__("../../.yarn/__virtual__/react-if-virtual-6e50bc3d5c/0/cache/react-if-npm-4.1.4-95583751aa-107ba70562.zip/node_modules/react-if/dist/react-if.esm.js"),dropdown=__webpack_require__("../../.yarn/__virtual__/@essex-components-virtual-02ce782154/0/cache/@essex-components-npm-3.6.15-62a7d1dd7b-595324c0c2.zip/node_modules/@essex/components/dist/hooks/fluent8/dropdown.js"),styled_components_browser_cjs=__webpack_require__("../../.yarn/__virtual__/styled-components-virtual-bd6ce6c024/0/cache/styled-components-npm-5.3.9-4d660d9c99-404311cc70.zip/node_modules/styled-components/dist/styled-components.browser.cjs.js");const Container=styled_components_browser_cjs.default.div`
	display: flex;
	flex-direction: column;
	gap: 2px;
	padding: 0;
`,Title=styled_components_browser_cjs.default.div`
	display: flex;	
	font-size: 0.8em;
	color: ${({theme})=>theme.palette.neutralSecondary};
`,Required=styled_components_browser_cjs.default.div`
	color: ${({theme})=>theme.palette.redDark};
	&:before {
		content: '${({required})=>required?"*":""}';
	}
`,Well=styled_components_browser_cjs.default.div`
	width: 100%;
	display: flex;
	justify-content: flex-start;
	align-items: center;
	gap: 4px;
	color: ${({theme})=>theme.palette.neutralSecondary};
	border: 1px dotted ${({theme})=>theme.palette.neutralTertiaryAlt};
	background: ${({theme})=>theme.palette.neutralLighter};
	border-radius: 4px;
	padding: 3px 8px;
`;const FieldWell=(0,react.memo)((function FieldWell({title,placeholder,icon,required,disabled,selectedKey,options,onChange,onReset,styles}){const _styles=function useFieldWellStyles(styles){const theme=(0,lib_commonjs.useTheme)();return(0,react.useMemo)((()=>(0,lib_commonjs.merge)({dropdown:{root:{width:"100%",border:"none"},dropdown:{border:"none"},title:{background:"none"}},icon:{root:{color:theme.palette.neutralPrimary}}},styles)),[theme,styles])}(styles),dropdownDisabled=disabled||!options||0===options.length,dropdownProps=function useFieldDropdownProps(dropdownStyles){const base=(0,react.useMemo)((()=>({styles:(0,lib_commonjs.merge)({title:{border:"none"}},dropdownStyles)})),[dropdownStyles]);return(0,dropdown.I)(base,"small")}(_styles.dropdown),resetDisabled=void 0===selectedKey,resetProps=function useResetButtonProps(disabled){const theme=(0,lib_commonjs.useTheme)();return(0,react.useMemo)((()=>({iconProps:{iconName:"Clear",styles:{root:{color:disabled?theme.palette.neutralTertiaryAlt:theme.palette.neutralPrimary,fontSize:9}}},styles:{root:{borderRadius:0,padding:0,margin:0,width:12,height:12}}})),[theme,disabled])}(resetDisabled),handleChange=(0,react.useCallback)(((_e,option)=>onChange?.(option?.key)),[onChange]);return(0,jsx_runtime.jsxs)(Container,{style:_styles.root,children:[(0,jsx_runtime.jsxs)(Title,{style:_styles.title,children:[title,(0,jsx_runtime.jsx)(Required,{required,style:_styles.required})]}),(0,jsx_runtime.jsxs)(Well,{style:_styles.well,children:[(0,jsx_runtime.jsx)(lib_commonjs.Icon,{iconName:icon,styles:_styles.icon}),(0,jsx_runtime.jsx)(lib_commonjs.Dropdown,{onClick:e=>e.stopPropagation(),disabled:dropdownDisabled,options:options||[],placeholder:dropdownDisabled?"(No valid options)":placeholder,onChange:handleChange,selectedKey:selectedKey||null,...dropdownProps}),(0,jsx_runtime.jsx)(react_if_esm.nA,{condition:void 0!==onReset,children:(0,jsx_runtime.jsx)(lib_commonjs.IconButton,{...resetProps,disabled:resetDisabled,onClick:onReset})})]})]})}));try{FieldWell.displayName="FieldWell",FieldWell.__docgenInfo={description:"",displayName:"FieldWell",props:{styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"FieldWellStyles"}},key:{defaultValue:null,description:"Unique key for the well.",name:"key",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"Title to display above the well.",name:"title",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"Name of an icon to render in front of the well dropdown.",name:"icon",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder for the dropdown when no value is selected.",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"Indicate if the well is required - this will render a red asterisk next to the title.",name:"required",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Indicate if the well is disabled - this will render the well as disabled.",name:"disabled",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"List of valid options that this field well can be set to.",name:"options",required:!1,type:{name:"ISelectableOption<any>[]"}},selectedKey:{defaultValue:null,description:"Selected key for the dropdown.",name:"selectedKey",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Change handler for the dropdown, presenting the new selected key.\n@param key\n@returns",name:"onChange",required:!1,type:{name:"(key: string) => void"}},onReset:{defaultValue:null,description:"Handler to indicate that a field well has been reset to its default state (no binding).\n@returns",name:"onReset",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../.yarn/__virtual__/@datashaper-react-virtual-d278aef28a/1/javascript/react/src/components/FieldWell/FieldWell.tsx#FieldWell"]={docgenInfo:FieldWell.__docgenInfo,name:"FieldWell",path:"../../.yarn/__virtual__/@datashaper-react-virtual-d278aef28a/1/javascript/react/src/components/FieldWell/FieldWell.tsx#FieldWell"})}catch(__react_docgen_typescript_loader_error){}function useTreeGroups(groups,narrow=!1){return(0,react.useMemo)((()=>groups.map((g=>({key:g.type,text:groupName(g,narrow)})))),[groups,narrow])}function groupName(group,narrow=!1){return group.type===ResourceGroupType.Data?narrow?"Data":"Data files":narrow?"Apps":"Analysis apps"}function useTreeItems(groups,onSelect,narrow){return(0,react.useMemo)((()=>groups.flatMap((group=>group.resources.map((resource=>makeTreeItem(resource,group.type,onSelect,narrow)))))),[groups,onSelect,narrow])}function makeTreeItem(resource,group,onSelect,narrow){const handled=new Set,children=[...resource.fieldWells?.map((well=>{const route=well.selectedKey?resource.children?.find((r=>r.key===well.selectedKey)):void 0;return well.selectedKey&&handled.add(well.selectedKey),{key:`well-${well.key}`,iconName:well.icon,text:well.title,onRenderTitle:()=>{const handleClick=route?()=>onSelect?.(route):void 0;return(0,jsx_runtime.jsx)("div",{style:{width:"100%",padding:"4px",cursor:handleClick?"pointer":"default"},onClick:handleClick,children:(0,jsx_runtime.jsx)(FieldWell,{...well})})}}}))||[],...resource.children?.filter((c=>!handled.has(c.key))).map((c=>makeTreeItem(c,group,onSelect,narrow)))||[]];return{key:resource.href??"no-href",text:resource.title,iconName:resource.icon,group,children:children.length>0?children:void 0,menuItems:resource.menuItems,onClick:()=>onSelect?.(resource)}}try{useTreeGroups.displayName="useTreeGroups",useTreeGroups.__docgenInfo={description:"Extract the grouping instructions for the Tree component.",displayName:"useTreeGroups",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../app-framework/src/components/app/ResourcesPane/ResourceTree.hooks.tsx#useTreeGroups"]={docgenInfo:useTreeGroups.__docgenInfo,name:"useTreeGroups",path:"../app-framework/src/components/app/ResourcesPane/ResourceTree.hooks.tsx#useTreeGroups"})}catch(__react_docgen_typescript_loader_error){}try{useTreeItems.displayName="useTreeItems",useTreeItems.__docgenInfo={description:"Extract a flat list of TreeItems for the Tree, with each assigned to a group\nthat aligns with the grouping instructions.",displayName:"useTreeItems",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../app-framework/src/components/app/ResourcesPane/ResourceTree.hooks.tsx#useTreeItems"]={docgenInfo:useTreeItems.__docgenInfo,name:"useTreeItems",path:"../app-framework/src/components/app/ResourcesPane/ResourceTree.hooks.tsx#useTreeItems"})}catch(__react_docgen_typescript_loader_error){}const treeStyles={groupHeader:{height:37,minHeight:37,display:"flex",alignItems:"center"},hierarchyLine:{border:"none"}},ResourceTree=(0,react.memo)((function ResourceTree({resources,selectedRoute,onSelect,narrow}){const groups=useTreeGroups(resources,narrow),items=useTreeItems(resources,onSelect,narrow);return(0,jsx_runtime.jsx)(Tree,{groups,items,selectedKey:selectedRoute,narrow,styles:treeStyles})}));try{ResourceTree.displayName="ResourceTree",ResourceTree.__docgenInfo={description:"",displayName:"ResourceTree",props:{narrow:{defaultValue:null,description:"",name:"narrow",required:!1,type:{name:"boolean"}},selectedRoute:{defaultValue:null,description:"",name:"selectedRoute",required:!1,type:{name:"string"}},resources:{defaultValue:null,description:"",name:"resources",required:!0,type:{name:"ResourceRouteGroup[]"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(resource: ResourceRoute) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../app-framework/src/components/app/ResourcesPane/ResourceTree.tsx#ResourceTree"]={docgenInfo:ResourceTree.__docgenInfo,name:"ResourceTree",path:"../app-framework/src/components/app/ResourcesPane/ResourceTree.tsx#ResourceTree"})}catch(__react_docgen_typescript_loader_error){}const ResourceTree_stories={title:"App:Components/ResourceTree",component:ResourceTree,argTypes:{}},mapper=(wellKey,setter)=>key=>{setter((prev=>prev.map((group=>({...group,resources:group.resources.map((r=>({...r,fieldWells:r.fieldWells?.map((f=>({...f,selectedKey:f.key===wellKey?key:f.selectedKey})))})))})))))},ResourceTreeStory={render:args=>{const[selectedRoute,setSelectedRoute]=(0,react.useState)(),[resources,setResources]=(0,react.useState)([]);return(0,react.useEffect)((()=>{const res=[{type:ResourceGroupType.Data,resources:[{key:"graph",title:"Graph",icon:"Flow",children:[{key:"nodes",title:"Nodes",icon:"Table",href:"/resources/data/graph/nodes"},{key:"edges",title:"Edges",icon:"Table",href:"/resources/data/graph/edges"}],fieldWells:[{key:"nodes",title:"Node bindings",placeholder:"Select node list",icon:"CircleRing",options:[{key:"nodes",text:"Nodes"},{key:"edges",text:"Edges"}],onChange:mapper("nodes",setResources)},{key:"edges",title:"Edge bindings",placeholder:"Select edge list",icon:"Line",required:!0,options:[{key:"nodes",text:"Nodes"},{key:"edges",text:"Edges"}],selectedKey:"edges",onChange:mapper("edges",setResources)},{key:"metadata",title:"Metadata table",placeholder:"Select metadata table",icon:"Table",onChange:mapper("metadata",setResources)}]}]}];setResources(res)}),[]),(0,jsx_runtime.jsx)("div",{style:{width:240,height:400,overflowY:"auto",border:"1px solid orange"},children:(0,jsx_runtime.jsx)(ResourceTree,{...args,resources:resources||[],selectedRoute,onSelect:res=>setSelectedRoute(res?.href)})})},name:"ResourceTree"};ResourceTreeStory.parameters={...ResourceTreeStory.parameters,docs:{...ResourceTreeStory.parameters?.docs,source:{originalSource:"{\n  render: ResourceTreeComponent,\n  name: 'ResourceTree'\n}",...ResourceTreeStory.parameters?.docs?.source}}}}}]);
//# sourceMappingURL=app-framework-src-components-app-ResourcesPane-ResourceTree-stories.065d6a28.iframe.bundle.js.map