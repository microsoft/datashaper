/*! For license information please see react-src-components-Codebook-Codebook-Codebook-stories.c682851b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_datashaper_stories=self.webpackChunk_datashaper_stories||[]).push([[639],{"../react/src/components/Codebook/Codebook/Codebook.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodebookStory:()=>CodebookStory,default:()=>Codebook_stories});var jsx_runtime=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/jsx-runtime.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.2.0-1eae08fee2-88e38092da.zip/node_modules/react/index.js"),data=__webpack_require__("../schema/src/data.ts"),dist=__webpack_require__("../../.yarn/__virtual__/@essex-styled-components-virtual-7a9a1c8fa5/0/cache/@essex-styled-components-npm-0.0.13-b74877a32a-e7647282ba.zip/node_modules/@essex/styled-components/dist/index.js"),lib_commonjs=__webpack_require__("../../.yarn/__virtual__/@fluentui-react-virtual-5f5d0dbfd8/0/cache/@fluentui-react-npm-8.107.6-83fa4147f5-bc09d93c84.zip/node_modules/@fluentui/react/lib-commonjs/index.js"),CodebookNameField=__webpack_require__("../react/src/components/Codebook/CodebookNameField/CodebookNameField.tsx"),CodebookDataNatureField=__webpack_require__("../react/src/components/Codebook/CodebookDataNatureField/CodebookDataNatureField.tsx"),CodebookDataTypeField=__webpack_require__("../react/src/components/Codebook/CodebookDataTypeField/CodebookDataTypeField.tsx"),CodebookDescriptionField=__webpack_require__("../react/src/components/Codebook/CodebookDescriptionField/CodebookDescriptionField.tsx"),CodebookDisplayNameField=__webpack_require__("../react/src/components/Codebook/CodebookDisplayNameField/CodebookDisplayNameField.tsx"),CodebookUnitField=__webpack_require__("../react/src/components/Codebook/CodebookUnitField/CodebookUnitField.tsx"),constants=__webpack_require__("../react/src/components/Codebook/constants.ts");var MappingFields=__webpack_require__("../react/src/components/Codebook/MappingFields/MappingFields.tsx"),Codebook_styles=__webpack_require__("../react/src/components/Codebook/styles.ts"),merge=__webpack_require__("../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-05cbffad6e.zip/node_modules/lodash-es/merge.js");const Codebook=(0,react.memo)((function Codebook({fields,onChangeFields,styles}){const heights=function useFieldHeights(){const[heights,setHeights]=(0,react.useState)({displayName:constants.Yw,description:constants.dz,units:constants.uo,dataType:constants.h6,dataNature:constants.I_,statsWrapper:constants.NR,name:constants.A1,mappingWrapper:constants.eZ});return(0,react.useMemo)((()=>{const get=key=>heights[key],set=(key,value)=>setHeights((prev=>({...prev,[key]:value})));return{get,set,updateAllMapping:newFields=>{const max=Math.max(...newFields.map((x=>Object.keys(x?.mapping||{}).length))),actual=get("mappingWrapper")||0,newHeight=constants.eZ+max*constants.SS;actual!==newHeight&&set("mappingWrapper",newHeight)}}}),[heights,setHeights])}(),theme=(0,lib_commonjs.useTheme)(),_styles=function useTableStyles(styles,heights){const theme=(0,lib_commonjs.useTheme)(),defaultStyles=(0,Codebook_styles.l)(heights);return(0,react.useMemo)((()=>{const border=`1px solid ${theme.palette.neutralTertiaryAlt}`,cellBase={root:{paddingTop:constants.NG,borderBottom:border}};return(0,merge.Z)(defaultStyles,{tableWrapper:{display:"flex"},labelWrapper:{marginTop:defaultStyles?.name?.root?.height,textAlign:"right",marginRight:10,whiteSpace:"pre"},name:{checkbox:{root:{visibility:"visible"}},root:{borderBottom:border}},statsWrapper:{root:{borderBottom:border}},displayName:{subComponentStyles:{label:{height:defaultStyles?.displayName?.root?.height,paddingTop:constants.qS}},...cellBase},description:{subComponentStyles:{label:{height:defaultStyles?.description?.root?.height,paddingTop:constants.qS}},field:{paddingTop:8},...cellBase},dataType:{title:{border:"unset",paddingTop:2},label:{height:defaultStyles?.dataType?.root?.height,paddingTop:constants.qS},...cellBase},dataNature:{title:{border:"unset",paddingTop:2},label:{height:defaultStyles?.dataNature?.root?.height,paddingTop:constants.qS},...cellBase},units:{subComponentStyles:{label:{height:defaultStyles?.units?.root?.height,paddingTop:constants.qS}},...cellBase},mapping:{label:{root:{paddingTop:constants.qS}},root:{paddingTop:constants.NG}}},styles)}),[theme,defaultStyles,styles])}(styles,heights),onChangeField=(0,react.useCallback)(((field,index)=>{const newFields=[...fields.slice(0,index),field,...fields.slice(index+1)];onChangeFields(newFields),heights.updateAllMapping(newFields)}),[onChangeFields,heights,fields]);return(0,jsx_runtime.jsxs)("div",{style:_styles?.tableWrapper,children:[(0,jsx_runtime.jsxs)("div",{style:_styles?.labelWrapper,children:[(0,jsx_runtime.jsx)(lib_commonjs.Label,{style:_styles?.displayName?.subComponentStyles?.label,children:"Display name"}),(0,jsx_runtime.jsx)(lib_commonjs.Label,{style:_styles?.description?.subComponentStyles?.label,children:"Description"}),(0,jsx_runtime.jsx)(lib_commonjs.Label,{style:_styles?.dataType?.label,children:"Data type"}),(0,jsx_runtime.jsx)(lib_commonjs.Label,{style:_styles?.dataNature?.label,children:"Data nature"}),(0,jsx_runtime.jsx)(lib_commonjs.Label,{style:_styles?.units?.subComponentStyles?.label,children:"Units"}),(0,jsx_runtime.jsx)(lib_commonjs.Label,{styles:_styles?.mapping?.label,children:"Mapping"})]}),(0,jsx_runtime.jsx)(Container,{children:fields.map(((field,index)=>(0,jsx_runtime.jsxs)("div",{style:(0,Codebook_styles.T)(theme,field.exclude,_styles.root,index===fields.length-1),children:[(0,jsx_runtime.jsx)(CodebookNameField.m,{styles:_styles.name,onChangeField:field=>onChangeField(field,index),field}),(0,jsx_runtime.jsx)(CodebookDisplayNameField.O,{borderless:!0,field,styles:_styles.displayName,onChangeField:field=>onChangeField(field,index)}),(0,jsx_runtime.jsx)(CodebookDescriptionField.e,{borderless:!0,field,styles:_styles.description,onChangeField:field=>onChangeField(field,index)}),(0,jsx_runtime.jsx)(CodebookDataTypeField.H,{enumeration:data.g,field,styles:_styles.dataType,onChangeField:field=>onChangeField(field,index)}),(0,jsx_runtime.jsx)(CodebookDataNatureField.F,{enumeration:data.BO,field,styles:_styles.dataNature,onChangeField:field=>onChangeField(field,index)}),(0,jsx_runtime.jsx)(CodebookUnitField.$,{borderless:!0,field,styles:_styles.units,onChangeField:field=>onChangeField(field,index)}),(0,jsx_runtime.jsx)(MappingFields.c,{styles:_styles.mapping,field,onChangeField:field=>onChangeField(field,index)})]},`${field.name}@${index}`)))})]})})),Container=dist.Z.div`
	display: flex;
	overflow: auto;
`;try{Codebook.displayName="Codebook",Codebook.__docgenInfo={description:"",displayName:"Codebook",props:{fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Field[]"}},metadata:{defaultValue:null,description:"",name:"metadata",required:!1,type:{name:"TableMetadata"}},onChangeFields:{defaultValue:null,description:"",name:"onChangeFields",required:!0,type:{name:"(fields: Field[]) => void"}},styles:{defaultValue:null,description:"",name:"styles",required:!1,type:{name:"CodebookTableStyles"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../react/src/components/Codebook/Codebook/Codebook.tsx#Codebook"]={docgenInfo:Codebook.__docgenInfo,name:"Codebook",path:"../react/src/components/Codebook/Codebook/Codebook.tsx#Codebook"})}catch(__react_docgen_typescript_loader_error){}const Codebook_stories={title:"Components/Codebook",component:Codebook,argTypes:{}},codebookResult_fields=[{name:"ID",title:"Identity",description:"Identifier for the record",type:"number",nature:"ordinal",example:5},{name:"diagnosis",title:"Diagnosis",description:"Diagnosis of the condition",type:"string",nature:"nominal",unit:"jargons"},{name:"test",type:"number",nature:"discrete"},{name:" letter",type:"string",nature:"nominal"},{name:" letter2",type:"string",nature:"nominal"},{name:" letter3",type:"string",nature:"nominal"}],metadata={rows:1e3,cols:6,columns:{ID:{bins:[{min:5.87,count:759},{min:358.428,count:0},{min:710.986,count:1},{min:1063.5439999999999,count:74},{min:1416.1019999999999,count:164},{min:1768.6599999999999,count:75},{min:2121.218,count:43},{min:2473.776,count:21},{min:2826.334,count:72},{min:3178.892,count:56}],count:1265,distinct:1182,maximum:3531.45,mean:891.7830434782592,median:201.91,minimum:5.87,mode:9.15,stdev:1075.6086847575084}}},CodebookStory={render:args=>{const[fields,setFields]=(0,react.useState)(codebookResult_fields);return(0,jsx_runtime.jsx)(Codebook,{fields,metadata,onChangeFields:setFields,...args})},name:"Codebook Table Editor"};CodebookStory.parameters={...CodebookStory.parameters,docs:{...CodebookStory.parameters?.docs,source:{originalSource:"{\n  render: CodebookComponent,\n  name: 'Codebook Table Editor'\n}",...CodebookStory.parameters?.docs?.source}}}}}]);