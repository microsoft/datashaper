{"version":3,"file":"main.6d7d45e145e1cc4f758a.js","mappings":";;AA+FA;AAMA;AAiBA;AC1GA;AACA;AACA;;;ACDA;;;;;;;;;ACHA;;;;;ACKA;;;AAKA;;AAIA;ACrBA;;ACSA;AACA;;;;AAMA;;;AAKA;;;;AAMA;;;AAGA;;;;AAMA;;;;AC3BA;;;;AAgBA;AAEA;ACpBA;;;;AAIA;AAGA;;AAIA;;AAIA;;;;;;ACRA;;;;;AAKA;AAEA;;;;;;;;;;ACrBA;;;;ACOA;AACA;ACDA;;;;;;ACOA;;;;AAMA;;;;AAMA;;;;;;;;;;ACvBA;;AAIA;;;;;;;;AAQA;;ACFA;ACSA;AAAA;;;ACXA;;AAGA;;;;;ACXA;;;ACSA;;AAIA;;AChBA;;;ACQA;;;;ACGA;;;AAIA;;;;AAIA;AAEA;;AAIA;;AAEA;AAEA;;;;;AAKA;AAIA;;;;;AAKA;AAGA;;AAEA;AAEA;;;;;;AAOA;;;AAKA;;;;;;AClDA;;AAGA;;AAIA;;;;ACPA;AACA;AAGA;;AAIA;;;ACZA;;AAIA;;;;ACMA;;ACJA;;;;AAMA;;;;;AAOA;;;;;ACNA;;;;;;ACPA;;AAGA;AAGA;;;ACFA;;ACNA;;;;AAAA;;;;ACPA;;;ACRA;;ACOA;;;;;;AAMA;AACA;AAGA;;;;ACJA;;ACEA;;ACDA;;;AAKA;;AAIA;;;;;;AAsBA;;;AAKA;;;AAKA;ACjBA;;;;ACpBA;;;ACJA;;;AAWA;;;;;AAKA;AAGA;;;AAKA;;AAIA;;AAIA;;;;ACFA;;;;AChCA;;;;AAIA;ACOA;;;ACPA;;;;AC6CA;;;AClDA;;;ACAA;;;;AAMA;;;AC8EA;;;;;AAOA;;;ACqDA;;;;AAMA;;;;AAMA;;;AC3JA;;;;AAMA;;AAIA;;;;;AAKA;AAGA;;;;ACUA;;ACzBA;;;;;;;ACGA;;;;;;ACLA;;;;AAIA;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;;;;;;;;;;AAeA;;AAIA;;;;AAMA;;ACtDA;;ACAA;;;;ACSA;;;;AAIA;;AAIA;;;AAKA;;AArBA;;AA2BA;;AAEA;;ACnBA;;ACnBA;;;;;;ACaA;AACA;;;;AAMA;;;AAGA;;AAKA;;;;;AAKA;AC8BA;;;AC7CA;;;;AAIA;AAGA;;;;;;ACDA;AAGA;;;AAGA;AAIA;;;;;;;;;ACtBA;AACA;AACA;AAGA;;AAWA;;;ACpBA;;ACDA;;AAKA;;;;;;AAWA;;;;;;AAMA;AAMA;;;;;AAKA;AClCA;;;;ACCA;;AAIA;;;ACCA;;ADQA;;ACRA;;;;;;;;;;ACIA","sources":["webpack://@datashaper/webapp/../../.yarn/cache/ajv-npm-8.11.2-96b35a945e-53435bf79e.zip/node_modules/ajv/dist/compile/validate/dataType.js","webpack://@datashaper/webapp/../../.yarn/cache/ajv-npm-8.11.2-96b35a945e-53435bf79e.zip/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/app/FileName/FileName.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/app/FileName/FileName.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/tables/TableDelimiterOptions/TableDelimiterOptions.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroTableHeader/ArqueroTableHeader.constants.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroTableHeader/ArqueroTableHeader.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroTableHeader/TableName.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/GroupHeader.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/ArqueroDetailsList.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/empty.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/CommandBarContainer.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/CommandBarContainer.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/DefaultColumnHeader.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/ValidationCellWrapper.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/ValidationCellWrapper.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/ArqueroDetailsList.constants.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/StatCell.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/ArqueroDetailsList/renderers/StatsColumnHeader.constants.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/tables/RawTable/RawTable.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/tables/RawTable/RawTable.types.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/tables/TablePreview/TablePreview.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/tables/ImportTable/ImportTable.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/app/ResourcesPane/ResourcesPane.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/app/ResourcesPane/FileTreeCommands.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/Codebook/CodebookStatsField/CodebookStatsField.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/Codebook/CodebookStatsField/CodebookStatsField.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/controls/CalendarPicker/CalendarPicker.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/controls/CalendarPicker/CalendarPicker.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/shared/DataTypeField.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/shared/DataTypeField.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/hooks/controls/mapping.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@monaco-editor-loader-virtual-521ab79a09/0/cache/@monaco-editor-loader-npm-1.3.2-a1ecf5411f-7a1b65052b.zip/node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/ViewOptions/ViewOptions.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/RawTableViewer/RawTableViewer.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/RawTableViewer/RawTableViewer.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/ParserOptionsEditor/ParserOptionsEditor.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/ParserOptionsEditor/ParserOptionsEditor.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/forms/VerbForm.styles.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/shared/FilterFunction.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/shared/FilterFunction.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/FilterForm/FilterForm.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/FilterForm/FilterForm.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/SetOperationForm/SetOperationForm.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/SetOperationForm/SetOperationForm.hooks.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/controls/SortInstruction/SortInstruction.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/OrderbyForm/OrderbyForm.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/RecodeForm/RecodeForm.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/RenameForm/RenameForm.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/verbs/forms/SampleForm/Sample.styles.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepForm/StepForm.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepEditor/StepEditor.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepEditor/StepEditor.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/Guidance/Guidance.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/TableCommands/GuidanceButton.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/TableCommands/GuidanceButton.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/TableCommands/StepEditorModal.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/TableCommands/StepEditorModal.tsx","webpack://@datashaper/webapp/../../.yarn/__virtual__/@fluentui-react-virtual-8a9c7084f6/0/cache/@fluentui-react-npm-8.103.10-5c0c15d74c-57e5967d0b.zip/node_modules/@fluentui/react/lib/components/Dialog/DialogContent.types.js","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepList/StepHeader.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepList/StepHeader.utils.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-react-virtual-81089ac0d8/1/javascript/react/src/components/StepList/StepList.styles.ts","webpack://@datashaper/webapp/../../.yarn/__virtual__/@datashaper-app-framework-virtual-2df40eb901/1/javascript/app-framework/src/components/editors/TableBundleEditor/BundleEditor.styles.ts","webpack://@datashaper/webapp/./src/components/Footer.styles.ts","webpack://@datashaper/webapp/./src/components/Footer.tsx","webpack://@datashaper/webapp/./src/components/Header.styles.ts","webpack://@datashaper/webapp/./src/components/Header.tsx","webpack://@datashaper/webapp/./src/components/SettingsPanel.styles.ts","webpack://@datashaper/webapp/./src/components/SettingsPanel.tsx","webpack://@datashaper/webapp/./src/App/App.tsx"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType = exports.DataType || (exports.DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport { Label } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const LabelName = styled(Label)`\n\tdisplay: flex;\n\talign-items: center;\n`\n\nexport const FileNameContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\twidth: 65%;\n\tgap: 5px;\n\n\t.ms-TextField {\n\t\twidth: 88%;\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { TextField } from '@fluentui/react'\nimport { memo } from 'react'\n\nimport { FileNameContainer, LabelName } from './FileName.styles.js'\nimport type { FileNameProps } from './FileName.types.js'\n\nexport const FileName: React.FC<FileNameProps> = memo(function FileName({\n\tname,\n\tsetName,\n\tpath,\n}) {\n\treturn (\n\t\t<FileNameContainer>\n\t\t\t<LabelName>Name: </LabelName>\n\t\t\t<TextField\n\t\t\t\tonChange={(_, value) => setName(value ?? '')}\n\t\t\t\tdescription={path ?? ''}\n\t\t\t\tvalue={name}\n\t\t\t\tname=\"fileName\"\n\t\t\t\ttitle=\"file name\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t/>\n\t\t</FileNameContainer>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport { ChoiceGroup, TextField } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const RadioGroup = styled(ChoiceGroup)`\n\t.ms-ChoiceField-field {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n`\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tgap: 10px;\n`\n\nexport const OtherTextField = styled(TextField)`\n\twidth: 50px;\n`\n\nexport const choiceGroupStyles = {\n\tflexContainer: {\n\t\tdisplay: 'flex',\n\t\tgap: '5px',\n\t},\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nexport const DEFAULT_HEIGHT = 36\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from '@essex/styled-components'\n\nimport { DEFAULT_HEIGHT } from './ArqueroTableHeader.constants.js'\n\nexport const Container = styled.div<{ background: string; color: string }>`\n\theight: ${DEFAULT_HEIGHT}px;\n\twidth: 100%;\n\tbackground-color: ${({ background }) => background};\n\tcolor: ${({ color }) => color};\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n`\n\nexport const H3 = styled.h3`\n\tfont-weight: normal;\n\tfont-size: 0.8em;\n`\n\nexport const Left = styled.div`\n\tflex: 1;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n`\n\nexport const Middle = styled.div<{ hasFarCommandBar: boolean }>`\n\tflex: 2;\n\tdisplay: flex;\n\tjustify-content: ${({ hasFarCommandBar }) =>\n\t\thasFarCommandBar ? 'center' : 'end'};\n\talign-items: center;\n\tpadding: 0 8px;\n\tgap: 8px;\n`\nexport const Right = styled.div`\n\tflex: 1;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { memo } from 'react'\n\nimport type { TableNameProps } from './TableName.types.js'\n\n/**\n * Renders the table name if passed, or the option to rename the name if the function\n * onRenameTable is passed to be called when clicking save or pressing enter on the callout\n */\nexport const TableName: React.FC<TableNameProps> = memo(function TableName({\n\tname,\n\tcolor,\n}) {\n\treturn (\n\t\t<Container>\n\t\t\t<H3 color={color}>{name}</H3>\n\t\t</Container>\n\t)\n})\n\nconst H3 = styled.h3<{ color?: string }>`\n\tfont-weight: normal;\n\tfont-size: 0.8em;\n\tmargin-right: 8px;\n\tcolor: ${({ theme, color }) => color || theme.palette.white};\n`\nconst Container = styled.div``\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from '@essex/styled-components'\nimport type { ITheme } from '@fluentui/react'\nimport { IconButton } from '@fluentui/react'\n\nexport const HeaderContainer = styled.div<{ groupLevel: number }>`\n\tpadding-left: ${({ groupLevel }) => `${groupLevel * 12}px`};\n\tdisplay: flex;\n\tgap: 8px;\n\tborder-bottom: 1px solid\n\t\t${({ theme }: { theme: ITheme }) => theme.palette.neutralLight};\n`\n\nexport const LevelButton = styled(IconButton)`\n\twidth: 32px;\n`\n\nexport const HeaderDetailsText = styled.span`\n\talign-self: center;\n`\n\nexport const Bold = styled.b``\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nimport { DEFAULT_ROW_HEIGHT } from './ArqueroDetailsList.constants.js'\n\nexport const DetailsWrapper = styled.div<{\n\tcompact: boolean\n\tcompactRowHeight: number\n}>`\n\theight: inherit;\n\tmax-height: inherit;\n\toverflow-y: auto;\n\toverflow-x: auto;\n\tspan.ms-DetailsHeader-cellTitle {\n\t\tbackground-color: ${({ theme }) => theme.palette.white};\n\t\tpadding-left: 10px;\n\t}\n\n\t.ms-List-cell {\n\t\tmin-height: ${({ compact, compactRowHeight }) =>\n\t\t\tcompact ? compactRowHeight : DEFAULT_ROW_HEIGHT}px;\n\t\theight: ${({ compact, compactRowHeight }) =>\n\t\t\tcompact ? compactRowHeight : DEFAULT_ROW_HEIGHT}px;\n\t}\n\n\t.ms-CommandBar {\n\t\tpadding: unset;\n\t}\n\n\t.ms-OverflowSet {\n\t\tjustify-content: center;\n\t}\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nexport const EMPTY_ARRAY = Object.freeze([]) as any as any[]\nexport const EMPTY_OBJECT = Object.freeze({}) as any as any\n\n/**\n * A utility function to cast the default empty array into the correct type;\n * @returns an empty array\n */\nexport function emptyArray<T>(): T[] {\n\treturn EMPTY_ARRAY as T[]\n}\n\n/**\n * A utility function to cast the default empty object to the correct type\n * @returns an empty object\n */\nexport function emptyObject<T>(): NonNullable<T> {\n\treturn EMPTY_OBJECT as NonNullable<T>\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tborder-top: 1px solid ${({ theme }) => theme.palette.neutralLighter};\n\tborder-bottom: 1px solid ${({ theme }) => theme.palette.neutralLighter};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { memo } from 'react'\n\nimport { Container } from './CommandBarContainer.styles.js'\nimport type { CommandBarContainerProps } from './CommandBarContainer.types.js'\nexport type { CommandBarContainerProps } from './CommandBarContainer.types.js'\n\nexport const CommandBarContainer: React.FC<CommandBarContainerProps> = memo(\n\tfunction CommandBarContainer({ props, renderers }) {\n\t\treturn (\n\t\t\t<Container className=\"header-command-bar\">\n\t\t\t\t{renderers.map((renderer, i) => (\n\t\t\t\t\t<div key={i}>{renderer(props)}</div>\n\t\t\t\t))}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type { ITooltipHostStyles } from '@fluentui/react'\nimport { Icon } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const HoverContainer = styled.div`\n\twidth: 14px;\n\tmin-height: 14px;\n\ttext-align: right;\n\tdisplay: flex;\n\talign-items: center;\n`\n\nexport const LeftIcon = styled(Icon)`\n\twidth: 14px;\n\tposition: absolute;\n\tleft: 8px;\n`\n\nexport const RightIcon = styled(Icon)`\n\twidth: 14px;\n\tposition: absolute;\n\tright: 8px;\n`\n\nexport const hostStyles: Partial<ITooltipHostStyles> = {\n\troot: { display: 'flex', alignItems: 'center' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from 'styled-components'\n\nexport const WarningContainer = styled.div`\n\twidth: 10px;\n`\n\nexport const Warning = styled.div`\n\twidth: 0;\n\theight: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: -3px;\n\tborder-left: 6px solid transparent;\n\tborder-right: 6px solid transparent;\n\tborder-bottom: 6px solid ${({ theme }) => theme.application().warning().hex()};\n\ttransform: rotate(-45deg);\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { DirectionalHint } from '@fluentui/react'\nimport type { ITooltipHostStyles } from '@fluentui/react/lib/Tooltip'\nimport { TooltipHost } from '@fluentui/react/lib/Tooltip'\nimport { useId } from '@fluentui/react-hooks'\nimport { memo } from 'react'\n\nimport { getValue } from '../ArqueroDetailsList.utils.js'\nimport { useGetColumnValidationErrors } from '../hooks/useGetColumnValidationErrors.js'\nimport { useValidationErrors } from '../hooks/useValidationErrors.js'\nimport type { FormattedCellProps } from './types.js'\nimport { Warning, WarningContainer } from './ValidationCellWrapper.styles.js'\n\nconst hostStyles: Partial<ITooltipHostStyles> = {\n\troot: { display: 'inline-block' },\n}\nconst calloutProps = { gapSpace: 0 }\n\n/**\n * Wraps any cell rendering with indication of validation errors if present.\n * This statically fixes the left spacing of the contents so there is room for a warning triangle in the corner (like Excel).\n */\nexport const ValidationCellWrapper: React.FC<\n\tReact.PropsWithChildren<FormattedCellProps>\n> = memo(function ValidationCellWrapper({\n\titem,\n\tcolumn,\n\tvalidationResult,\n\tchildren,\n}) {\n\tconst value = getValue(item, column)\n\tconst tooltipId = useId('tooltip')\n\tconst errors = useValidationErrors(value, validationResult)\n\tconst errorMessages = useGetColumnValidationErrors(\n\t\t'This cell value violates the following constraints:',\n\t\terrors,\n\t)\n\treturn (\n\t\t<>\n\t\t\t<WarningContainer>\n\t\t\t\t{errorMessages && (\n\t\t\t\t\t<TooltipHost\n\t\t\t\t\t\tcontent={errorMessages}\n\t\t\t\t\t\tid={tooltipId}\n\t\t\t\t\t\tcalloutProps={calloutProps}\n\t\t\t\t\t\tstyles={hostStyles}\n\t\t\t\t\t\tdirectionalHint={DirectionalHint.bottomRightEdge}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Warning />\n\t\t\t\t\t</TooltipHost>\n\t\t\t\t)}\n\t\t\t</WarningContainer>\n\t\t\t{children}\n\t\t</>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n/**\n * Hard-coded in the fluent DetailsList rows.\n * https://github.com/microsoft/fluentui/blob/547d0184dbf41e4b42ffb13f6db2dac0fd85f70a/packages/react/src/components/DetailsList/DetailsRow.styles.ts#L40\n */\nexport const DEFAULT_ROW_HEIGHT = 42\n/**\n * Hard-coded in the fluent DetailsList rows\n */\nexport const COMPACT_ROW_HEIGHT = 32\n\n/**\n * Hard-coded in the fluent DetailsList cell header\n */\nexport const HEADER_WIDTH_PADDING = 20\n\n/**\n * Includes text height and DetailsList hard-coded padding\n */\nexport const BASE_HEADER_HEIGHT = 33\nexport const DEFAULT_COLUMN_WIDTH = 100\n\nexport const STATS_HEADER_ITEM_HEIGHT = 14\n\nexport const HISTOGRAM_HEADER_PADDING = 8\nexport const HISTOGRAM_HEADER_HEIGHT = 20\nexport const HISTOGRAM_HEADER_COMPACT_HEIGHT = 16\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from 'styled-components'\n\nimport { STATS_HEADER_ITEM_HEIGHT } from '../ArqueroDetailsList.constants.js'\n\nexport const Container = styled.div`\n\theight: ${STATS_HEADER_ITEM_HEIGHT}px;\n\tline-height: ${STATS_HEADER_ITEM_HEIGHT}px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n`\nexport const Name = styled.div`\n\ttext-transform: capitalize;\n`\nexport const Value = styled.div`\n\tmax-width: '100%';\n\toverflow: 'hidden';\n\twhite-space: 'nowrap';\n\ttext-overflow: 'ellipsis';\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { StatsColumnType } from '../ArqueroDetailsList.types.js'\n\nexport const pretty: Record<string, string> = {\n\tdistinct: 'unique',\n\tinvalid: 'empty',\n}\n\nexport const DEFAULT_STATS: StatsColumnType[] = [\n\tStatsColumnType.Type,\n\tStatsColumnType.Min,\n\tStatsColumnType.Max,\n\tStatsColumnType.Distinct,\n\tStatsColumnType.Invalid,\n]\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type { ArqueroTableHeaderStyles } from '@datashaper/react'\nimport { MessageBar, useTheme } from '@fluentui/react'\nimport { useMemo } from 'react'\nimport styled from 'styled-components'\n\nexport const DatasetContainer = styled.div`\n\tmax-height: calc(100% - 82px);\n\theight: 100%;\n`\n\nexport const Message = styled(MessageBar)`\n\tmargin-top: 10px;\n`\n\nexport const DetailsListContainer = styled.div`\n\theight: 100%;\n`\n\nexport function useHeaderStyles(): ArqueroTableHeaderStyles {\n\tconst theme = useTheme()\n\treturn useMemo(\n\t\t() => ({\n\t\t\troot: {\n\t\t\t\tbackground: theme.palette.white,\n\t\t\t\theight: 36,\n\t\t\t\tborderBottom: `1px solid ${theme.palette.neutralTertiaryAlt}`,\n\t\t\t},\n\t\t}),\n\t\t[theme],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type { ArqueroDetailsListProps } from '@datashaper/react'\nimport type ColumnTable from 'arquero/dist/types/table/column-table.js'\n\nexport const RawTableDefaultFeatures = {\n\tstatsColumnHeaders: false,\n}\n\nexport interface RawTableProps extends ArqueroDetailsListProps {\n\ttable: ColumnTable\n\terror?: string\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type ColumnTable from 'arquero/dist/types/table/column-table.js'\nimport { memo } from 'react'\n\nimport { RawTable, RawTableDefaultFeatures } from '../RawTable/index.js'\nimport { Container } from './TablePreview.styles.js'\n\nexport const TablePreview: React.FC<{\n\ttable?: ColumnTable\n\terror?: string\n\tshowType?: boolean\n}> = memo(function TablePreview({ table, error, showType }) {\n\treturn (\n\t\t<Container>\n\t\t\t{table && (\n\t\t\t\t<RawTable\n\t\t\t\t\tfeatures={{\n\t\t\t\t\t\t...RawTableDefaultFeatures,\n\t\t\t\t\t\tstatsColumnHeaders: showType,\n\t\t\t\t\t}}\n\t\t\t\t\terror={error}\n\t\t\t\t\ttable={table}\n\t\t\t\t></RawTable>\n\t\t\t)}\n\t\t</Container>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type { Theme } from '@fluentui/react'\nimport { Label } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const PropsContainer = styled.div`\n\tdisplay: flex;\n\tcolumn-gap: 15px;\n\talign-items: center;\n`\nexport const FormatContainer = styled.div`\n\tdisplay: grid;\n\tgrid-template-columns: 1fr 2fr;\n`\nexport const Code = styled.pre`\n\tmargin-top: 0.5em;\n\tpadding: 10px;\n\tborder: 1px solid\n\t\t${({ theme }: { theme: Theme }) => theme.palette.neutralTertiaryAlt};\n`\nexport const Container = styled.div``\nexport const ExampleContainer = styled.div`\n\twidth: min-content;\n`\nexport const ExampleLabel = styled(Label)`\n\tfont-weight: normal;\n\tcolor: ${({ theme }: { theme: Theme }) => theme.palette.neutralSecondary};\n`\nexport const Header = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 5px 10px;\n\tcolumn-gap: 10px;\n\tbackground-color: ${({ theme }: { theme: Theme }) =>\n\t\ttheme.palette.neutralLighter};\n`\n\nexport const HeaderTitle = styled.span`\n\tdisplay: flex;\n\tfont-weight: bold;\n\tflex-direction: column;\n\tjustify-content: center;\n\tcolor: ${({ theme }: { theme: Theme }) => theme.palette.neutralSecondary};\n`\n\nexport const ModalLabel = styled.span`\n\tfont-weight: bold;\n\tcolor: ${({ theme }: { theme: Theme }) => theme.palette.neutralSecondary};\n`\nexport const ModalBody = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20px;\n\tpadding: 12px;\n\theight: 100%;\n`\nexport const Footer = styled.div`\n\tpadding: 10px;\n\tfloat: right;\n`\n\nexport const modalStyles = {\n\tmain: { width: 800, maxHeight: '100%' },\n\tscrollableContent: { maxHeight: '90vh' },\n}\nexport const buttonChoiceGroupStyles = { alignSelf: 'flex-start' }\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { IconButton } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\theight: 100%;\n\twidth: auto;\n`\n\nexport const MenuContainer = styled.div`\n\twidth: 100%;\n`\nexport const ExpandButton = styled(IconButton)`\n\twidth: inherit;\n`\n\nexport const icons = {\n\ttable: { iconName: 'Table' },\n\tsave: { iconName: 'Save' },\n\texpand: { iconName: 'DoubleChevronRight12' },\n\tcollapse: { iconName: 'DoubleChevronLeft12' },\n\tproject: { iconName: 'ZipFolder' },\n\topenFile: { iconName: 'FabricOpenFolderHorizontal' },\n\tnewFile: { iconName: 'NewFolder' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { ICommandBarStyles } from '@fluentui/react'\nimport { CommandBar, CommandBarButton, useTheme } from '@fluentui/react'\nimport { useMemo } from 'react'\nimport styled from 'styled-components'\n\nexport const Commands = styled(CommandBar)`\n\t.ms-CommandBar {\n\t\tpadding-left: unset;\n\t}\n`\n\nexport const CollapsedCommands = styled.div`\n\tbackground: ${({ theme }) => theme.palette.neutralLighter};\n`\n\nexport const CollapsedButton = styled(CommandBarButton)`\n\twidth: inherit;\n`\n\nexport const collapsedButtonStyles = {\n\troot: {\n\t\tbackground: 'transparent',\n\t\tminWidth: 'unset',\n\t},\n\tmenuIcon: { display: 'none' },\n\tflexContainer: {\n\t\t// standard fluent button height\n\t\theight: 32,\n\t},\n}\n\nexport const icons = {\n\tnewFile: { iconName: 'NewFolder' },\n\topenFile: { iconName: 'FabricOpenFolderHorizontal' },\n\tsave: { iconName: 'Save' },\n\ttable: { iconName: 'Table' },\n\tgrid: { iconName: 'GridViewSmall' },\n\tfile: { iconName: 'Page' },\n\tproject: { iconName: 'ZipFolder' },\n\topenExpandedView: { iconName: 'DoubleChevronRight12' },\n\tcloseExpandedView: { iconName: 'DoubleChevronLeft12' },\n}\n\nexport function useCommandbarStyles(): ICommandBarStyles {\n\tconst theme = useTheme()\n\treturn useMemo(\n\t\t() => ({\n\t\t\troot: {\n\t\t\t\tbackground: theme.palette.neutralLighter,\n\t\t\t},\n\t\t}),\n\t\t[theme],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { Label } from '@fluentui/react'\n\nexport const Flex = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n`\nexport const FieldName = styled(Label)`\n\tmargin: auto;\n`\n\nexport const DataDisplay = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { IColumn } from '@fluentui/react'\nimport { Checkbox } from '@fluentui/react'\nimport {\n\ttype FormEvent,\n\tmemo,\n\tuseCallback,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from 'react'\n\nimport { StatsColumnType } from '../../ArqueroDetailsList/ArqueroDetailsList.types.js'\nimport { HistogramColumnHeader } from '../../ArqueroDetailsList/renderers/HistogramColumnHeader.js'\nimport { StatsColumnHeader } from '../../ArqueroDetailsList/renderers/StatsColumnHeader.js'\nimport { DataDisplay, FieldName, Flex } from './CodebookStatsField.styles.js'\nimport type { CodebookStatsFieldProps } from './CodebookStatsField.types.js'\n\nconst DEFAULT_STATS = [\n\tStatsColumnType.Count,\n\tStatsColumnType.Min,\n\tStatsColumnType.Max,\n\tStatsColumnType.Example,\n]\n\nexport const CodebookStatsField: React.FC<CodebookStatsFieldProps> = memo(\n\tfunction CodebookStatsField(props) {\n\t\tconst { field, onChangeField, styles, checkbox, histogramColumn } = props\n\t\tconst [column, setColumn] = useState(histogramColumn)\n\t\tconst wrapperRef = useRef<HTMLDivElement | null>(null)\n\n\t\tuseEffect(() => {\n\t\t\tif (!histogramColumn) {\n\t\t\t\tsetColumn({\n\t\t\t\t\tcurrentWidth:\n\t\t\t\t\t\t(wrapperRef?.current?.clientWidth || 0) -\n\t\t\t\t\t\t(Number(styles?.root?.padding || 0) * 2 ?? 0),\n\t\t\t\t} as IColumn)\n\t\t\t}\n\t\t}, [wrapperRef, histogramColumn, styles])\n\n\t\tconst onChangeValue = useCallback(\n\t\t\t(\n\t\t\t\t_?: FormEvent<HTMLElement | HTMLInputElement> | undefined,\n\t\t\t\tchecked?: boolean | undefined,\n\t\t\t) => {\n\t\t\t\tonChangeField?.({ ...field, exclude: !checked })\n\t\t\t\tcheckbox?.onChange?.(_, checked)\n\t\t\t},\n\t\t\t[onChangeField, checkbox, field],\n\t\t)\n\n\t\treturn (\n\t\t\t<div ref={wrapperRef} style={styles?.root}>\n\t\t\t\t<Flex>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tstyles={styles?.checkbox}\n\t\t\t\t\t\tchecked={!field.exclude}\n\t\t\t\t\t\t{...checkbox}\n\t\t\t\t\t\tonChange={onChangeValue}\n\t\t\t\t\t/>\n\t\t\t\t\t<FieldName disabled={field.exclude}>{field.name}</FieldName>\n\t\t\t\t</Flex>\n\t\t\t\t<DataDisplay>\n\t\t\t\t\t<StatsColumnHeader\n\t\t\t\t\t\tstats={DEFAULT_STATS}\n\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\tdisabled={field.exclude}\n\t\t\t\t\t/>\n\t\t\t\t\t<HistogramColumnHeader\n\t\t\t\t\t\tcolumn={column}\n\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\tdisabled={field.exclude}\n\t\t\t\t\t/>\n\t\t\t\t</DataDisplay>\n\t\t\t</div>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { FontIcon, Label, mergeStyles } from '@fluentui/react'\n\nexport const iconClass = mergeStyles({\n\tfontSize: 20,\n\theight: 20,\n\twidth: 20,\n})\n\nexport const Container = styled.div`\n\tdisplay: inline;\n`\n\nexport const CalendarContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n`\n\nexport const CalendarButton = styled(FontIcon)`\n\tdisplay: inline;\n\tfloat: left;\n\tmargin-left: 8px;\n\tmargin-right: 4px;\n`\n\nexport const CalendarLabel = styled(Label)`\n\tdisplay: inline;\n\tfloat: left;\n\tmargin-left: 8px;\n\tmargin-right: 3px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport {\n\tCalendar,\n\tCallout,\n\tdefaultCalendarStrings,\n\tDirectionalHint,\n\tFocusTrapZone,\n\tuseTheme,\n} from '@fluentui/react'\nimport { useBoolean } from '@fluentui/react-hooks'\nimport { memo, useCallback, useMemo, useRef, useState } from 'react'\n\nimport type { CalendarPickerProps } from '../CalendarPicker/index.js'\nimport {\n\tCalendarButton,\n\tCalendarContainer,\n\tCalendarLabel,\n\tContainer,\n\ticonClass,\n} from './CalendarPicker.styles.js'\n\nexport const CalendarPicker: React.FC<CalendarPickerProps> = memo(\n\tfunction CalendarPicker({ onSelectDate, value, disabled, cleanLabel }) {\n\t\tconst [selectedDate, setSelectedDate] = useState<Date>(value ?? new Date())\n\t\tconst [\n\t\t\tshowCalendar,\n\t\t\t{ toggle: toggleShowCalendar, setFalse: hideCalendar },\n\t\t] = useBoolean(false)\n\t\tconst buttonContainerRef = useRef<HTMLDivElement>(null)\n\n\t\tconst onSelectDateChange = useCallback(\n\t\t\t(date: Date): void => {\n\t\t\t\tsetSelectedDate(date)\n\t\t\t\thideCalendar()\n\t\t\t},\n\t\t\t[hideCalendar],\n\t\t)\n\n\t\tconst theme = useTheme()\n\t\tconst iconColors = useMemo(\n\t\t\t() => ({\n\t\t\t\tdisabled: theme.palette.neutralTertiary,\n\t\t\t\tenabled: theme.palette.neutralPrimary,\n\t\t\t}),\n\t\t\t[theme],\n\t\t)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<CalendarContainer ref={buttonContainerRef}>\n\t\t\t\t\t<CalendarButton\n\t\t\t\t\t\taria-label=\"Compass\"\n\t\t\t\t\t\ticonName=\"Calendar\"\n\t\t\t\t\t\tclassName={iconClass}\n\t\t\t\t\t\tonClick={!disabled ? toggleShowCalendar : undefined}\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t? { cursor: 'default', color: iconColors.disabled }\n\t\t\t\t\t\t\t\t: { cursor: 'pointer', color: iconColors.enabled }\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{selectedDate != null && !cleanLabel ? (\n\t\t\t\t\t\t<CalendarLabel>\n\t\t\t\t\t\t\t{!cleanLabel ? selectedDate?.toLocaleDateString() : ''}\n\t\t\t\t\t\t</CalendarLabel>\n\t\t\t\t\t) : null}\n\t\t\t\t</CalendarContainer>\n\t\t\t\t{showCalendar && (\n\t\t\t\t\t<Callout\n\t\t\t\t\t\tisBeakVisible={false}\n\t\t\t\t\t\tgapSpace={0}\n\t\t\t\t\t\tdoNotLayer={false}\n\t\t\t\t\t\ttarget={buttonContainerRef}\n\t\t\t\t\t\tdirectionalHint={DirectionalHint.bottomLeftEdge}\n\t\t\t\t\t\tonDismiss={hideCalendar}\n\t\t\t\t\t\tsetInitialFocus\n\t\t\t\t\t>\n\t\t\t\t\t\t<FocusTrapZone isClickableOutsideFocusTrap>\n\t\t\t\t\t\t\t<Calendar\n\t\t\t\t\t\t\t\tonDismiss={hideCalendar}\n\t\t\t\t\t\t\t\tshowMonthPickerAsOverlay\n\t\t\t\t\t\t\t\thighlightSelectedMonth\n\t\t\t\t\t\t\t\tshowGoToToday={false}\n\t\t\t\t\t\t\t\tonSelectDate={(date: Date) => {\n\t\t\t\t\t\t\t\t\tonSelectDate(date)\n\t\t\t\t\t\t\t\t\tonSelectDateChange(date)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvalue={selectedDate}\n\t\t\t\t\t\t\t\t// Calendar uses English strings by default. For localized apps, you must override this prop.\n\t\t\t\t\t\t\t\tstrings={defaultCalendarStrings}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FocusTrapZone>\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nexport { dropdownStyles, narrowDropdownStyles } from '../../styles.js'\n\nexport const LeftAlignedRow = styled.div`\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-start;\n\talign-items: flex-end;\n`\n\n/**\n * For explanatory text below an input,\n */\nexport const InputExplainer = styled.div`\n\tfont-size: 0.85em;\n\tcolor: ${({ theme }) => theme.palette.neutralSecondary};\n`\n\nexport const checkboxStyles = {\n\troot: {\n\t\twidth: 220,\n\t\tpaddingTop: '10px',\n\t},\n}\n\n/**\n * For very narrow side-by-sides with a delete button for example\n */\nexport const narrowerDropdownStyles = {\n\troot: {\n\t\twidth: 99,\n\t},\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { Label, TextField } from '@fluentui/react'\n\nimport { narrowDropdownStyles } from '../styles.js'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nexport const leftStyles = {\n\troot: {\n\t\t...narrowDropdownStyles.root,\n\t\tmarginRight: 12,\n\t},\n}\n\nexport const TextValue = styled(TextField)`\n\tdisplay: inline;\n`\n\nexport const OrLabel = styled(Label)`\n\tdisplay: inline;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { DataType } from '@datashaper/schema'\nimport { coerce } from '@datashaper/tables'\nimport type { IDropdownOption } from '@fluentui/react'\nimport { Dropdown, mergeStyleSets, SpinButton } from '@fluentui/react'\nimport { memo, useCallback } from 'react'\n\nimport { CalendarPicker } from '../../../controls/index.js'\nimport { narrowerDropdownStyles } from '../styles.js'\nimport { Container, TextValue } from './DataTypeField.styles.js'\nimport type { DataTypeFieldProps } from './DataTypeField.types.js'\n\nexport const DataTypeField: React.FC<DataTypeFieldProps> = memo(\n\tfunction DataTypeField({\n\t\tdataType,\n\t\tkeyValue,\n\t\tvalue,\n\t\tplaceholder,\n\t\tonKeyChange,\n\t\tonValueChange,\n\t\tisKey,\n\t\tdropdownStyles,\n\t\tdisabled,\n\t}) {\n\t\tconst booleanOptions: IDropdownOption[] = [\n\t\t\t{ key: 'true', text: 'true' },\n\t\t\t{ key: 'false', text: 'false' },\n\t\t]\n\n\t\tconst styles = mergeStyleSets(narrowerDropdownStyles, dropdownStyles)\n\t\tconst onSelectDate = useCallback(\n\t\t\t(date: Date): void => {\n\t\t\t\tconst val = coerce(date, dataType)\n\t\t\t\tisKey\n\t\t\t\t\t? onKeyChange(\n\t\t\t\t\t\t\tnew Date(value).toISOString(),\n\t\t\t\t\t\t\tnew Date(val).toISOString(),\n\t\t\t\t\t  )\n\t\t\t\t\t: onValueChange(\n\t\t\t\t\t\t\tnew Date(keyValue).toISOString(),\n\t\t\t\t\t\t\tnew Date(val).toISOString(),\n\t\t\t\t\t  )\n\t\t\t},\n\t\t\t[onKeyChange, onValueChange, dataType, isKey, value, keyValue],\n\t\t)\n\n\t\tconst onChangeTextFieldValue = useCallback(\n\t\t\t(\n\t\t\t\t_event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n\t\t\t\tnewValue?: string,\n\t\t\t) => {\n\t\t\t\tconst val = coerce(newValue, dataType)\n\t\t\t\tisKey\n\t\t\t\t\t? onKeyChange(value.toString(), val.toString())\n\t\t\t\t\t: onValueChange(keyValue, val)\n\t\t\t},\n\t\t\t[onKeyChange, onValueChange, dataType, isKey, value, keyValue],\n\t\t)\n\n\t\tconst spinButtonOnChange = useCallback(\n\t\t\t(_event: React.SyntheticEvent<HTMLElement>, newValue?: string) => {\n\t\t\t\tif (newValue != null) {\n\t\t\t\t\tconst val = coerce(newValue, dataType)\n\t\t\t\t\tisKey ? onKeyChange(value, val) : onValueChange(keyValue, val)\n\t\t\t\t}\n\t\t\t},\n\t\t\t[onKeyChange, onValueChange, dataType, isKey, value, keyValue],\n\t\t)\n\n\t\tconst dropDownOnChange = useCallback(\n\t\t\t(\n\t\t\t\t_e: React.FormEvent<HTMLDivElement>,\n\t\t\t\tnewValue?: IDropdownOption<any> | undefined,\n\t\t\t) => {\n\t\t\t\tif (newValue != null) {\n\t\t\t\t\tisKey\n\t\t\t\t\t\t? onKeyChange(value, newValue.key)\n\t\t\t\t\t\t: onValueChange(keyValue, newValue.key === 'true' ? true : false)\n\t\t\t\t}\n\t\t\t},\n\t\t\t[onKeyChange, onValueChange, isKey, value, keyValue],\n\t\t)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t{dataType === DataType.Date ? (\n\t\t\t\t\t<CalendarPicker\n\t\t\t\t\t\tonSelectDate={onSelectDate}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\n\t\t\t\t{dataType === DataType.String ? (\n\t\t\t\t\t<TextValue\n\t\t\t\t\t\tonChange={onChangeTextFieldValue}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tstyles={styles}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t></TextValue>\n\t\t\t\t) : null}\n\t\t\t\t{dataType === DataType.Number ? (\n\t\t\t\t\t<SpinButton\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tstyles={styles}\n\t\t\t\t\t\tonChange={spinButtonOnChange}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\n\t\t\t\t{dataType === DataType.Boolean ? (\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tselectedKey={value.toString()}\n\t\t\t\t\t\toptions={booleanOptions}\n\t\t\t\t\t\tstyles={styles}\n\t\t\t\t\t\tonChange={dropDownOnChange}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport { type Value,DataType } from '@datashaper/schema'\nimport { useCallback } from 'react'\n\nexport function useHandleKeyChange(\n\tmapList: Record<Value, Value>,\n\tonChange?: (mapping: Record<Value, Value>) => void,\n): (previousKey: Value, newKey: Value) => void {\n\treturn useCallback(\n\t\t(previousKey, newKey) => {\n\t\t\tconst mapping: Record<Value, Value> = {}\n\n\t\t\tfor (const key in mapList) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\tkey === previousKey.toString()\n\t\t\t\t\t? (mapping[newKey] = mapList[key])\n\t\t\t\t\t: (mapping[key] = mapList[key]!)\n\t\t\t}\n\n\t\t\tonChange?.(mapping)\n\t\t},\n\t\t[mapList, onChange],\n\t)\n}\n\nexport function useHandleValueChange(\n\tmapList: Record<Value, Value>,\n\tdataType?: DataType,\n\tonChange?: (mapping: Record<Value, Value>) => void,\n): (key: Value, newValue: Value) => void {\n\treturn useCallback(\n\t\t(key, newValue) => {\n\t\t\tconst mapping: Record<Value, Value> = {}\n\n\t\t\tfor (const keyElement in mapList) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\tkeyElement === key.toString()\n\t\t\t\t\t? (mapping[keyElement] =\n\t\t\t\t\t\t\tdataType === DataType.Date ? new Date(newValue) : newValue)\n\t\t\t\t\t: (mapping[keyElement] = mapList[keyElement]!)\n\t\t\t}\n\n\t\t\tonChange?.(mapping)\n\t\t},\n\t\t[onChange, dataType, mapList],\n\t)\n}\n\nexport function useHandleDelete(\n\tmapList: Record<Value, Value>,\n\tonChange?: (mapping: Record<Value, Value>) => void,\n): (key: Value) => void {\n\treturn useCallback(\n\t\tkey => {\n\t\t\tconst mapping = { ...mapList }\n\t\t\tdelete mapping[key]\n\t\t\tonChange?.(mapping)\n\t\t},\n\t\t[mapList, onChange],\n\t)\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _unsupportedIterableToArray as unsupportedIterableToArray };\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from 'styled-components'\n\nexport const ViewOptionsContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: end;\n\tmin-height: 45px;\n\talign-items: center;\n\tpadding-right: 5px;\n\tbackground: ${({ theme }) => theme.palette.neutralLighter};\n\tborder-bottom: 1px solid ${({ theme }) => theme.palette.neutralTertiaryAlt};\n`\n\nexport const icons = {\n\trawFile: { iconName: 'CodeEdit' },\n\tinteractive: { iconName: 'PreviewLink' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from 'styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n`\n\nexport const TableContainer = styled.div`\n\theight: 100%;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { memo, useState } from 'react'\n\nimport { useDataTableSource } from '../../../hooks/index.js'\nimport { RawTable, RawTableDefaultFeatures } from '../../tables/index.js'\nimport { JsonEditor } from '../JsonEditor/JsonEditor.js'\nimport { ViewType } from '../ViewOptions/index.js'\nimport { ViewOptions } from '../ViewOptions/ViewOptions.js'\nimport { useContent, useOnChange } from './RawTableViewer.hooks.js'\nimport { Container, TableContainer } from './RawTableViewer.styles.js'\nimport type { RawTableViewerProps } from './RawTableViewer.types.js'\n\nexport const RawTableViewer: React.FC<RawTableViewerProps> = memo(\n\tfunction RawTableViewer({ dataTable }) {\n\t\tconst table = useDataTableSource(dataTable)\n\t\tconst [viewType, setViewType] = useState(ViewType.Interactive)\n\t\tconst onChange = useOnChange(dataTable)\n\t\tconst content = useContent(dataTable)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<ViewOptions selected={viewType} onChange={setViewType} />\n\t\t\t\t{dataTable && table?.table && (\n\t\t\t\t\t<TableContainer>\n\t\t\t\t\t\t{viewType === ViewType.Interactive ? (\n\t\t\t\t\t\t\t<RawTable\n\t\t\t\t\t\t\t\tfeatures={RawTableDefaultFeatures}\n\t\t\t\t\t\t\t\ttable={table.table}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<JsonEditor content={content} onChange={onChange} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableContainer>\n\t\t\t\t)}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport type { ITheme } from '@fluentui/react'\nimport { Label } from '@fluentui/react'\nimport styled from 'styled-components'\n\nexport const Container = styled.div``\n\nexport const ParserOptionsContainer = styled.div`\n\tpadding: 10px;\n`\nexport const TableFormatContainer = styled.div`\n\tdisplay: flex;\n\tcolumn-gap: 30px;\n`\n\nexport const RadioBoxLabel = styled(Label)`\n\tpadding: unset;\n`\n\nexport const tabeLayoutOptionsStyle = {\n\tflexContainer: {\n\t\tdisplay: 'flex',\n\t\tcolumnGap: '10px',\n\t},\n}\n\nexport const textFieldStyles = { fieldGroup: { width: 70 } }\nexport const checkboxContainerStyle = { alignItems: 'center' }\nexport const spinButtonStyles = {\n\tlabel: { lineHeight: 'inherit' },\n\troot: { width: 50 },\n}\n\nexport const Grid = styled.div`\n\tdisplay: grid;\n\twidth: 100%;\n\tgrid-template-columns: 1fr 1fr;\n\tgrid-template-rows: 1fr 1fr;\n\tgap: 0px 30px;\n`\n\nexport const FieldContainer = styled.div`\n\tdisplay: flex;\n\tcolumn-gap: 10px;\n`\n\nexport const PreviewContainer = styled.div``\n\nexport const PreviewLabel = styled(Label)`\n\tmargin-top: 10px;\n\tpadding-left: 10px;\n\tcolor: ${({ theme }: { theme: ITheme }) => theme.palette.neutralSecondary};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { DataOrientation } from '@datashaper/schema'\nimport { DataFormat } from '@datashaper/schema'\nimport {\n\tCheckbox,\n\tChoiceGroup,\n\tPosition,\n\tSpinButton,\n\tTextField,\n} from '@fluentui/react'\nimport { useBoolean } from '@fluentui/react-hooks'\nimport { useDebounceFn } from 'ahooks'\nimport { memo, useCallback, useEffect, useState } from 'react'\n\nimport { useDataTableSource } from '../../../hooks/index.js'\nimport { TableDelimiterOptions } from '../../tables/TableDelimiterOptions/TableDelimiterOptions.js'\nimport { choiceGroupStyles } from '../../tables/TableDelimiterOptions/TableDelimiterOptions.styles.js'\nimport { TableLayoutOptions } from '../../tables/TableLayoutOptions/TableLayoutOptions.js'\nimport { TablePreview } from '../../tables/TablePreview/TablePreview.js'\nimport {\n\tcheckboxContainerStyle,\n\tContainer,\n\tFieldContainer,\n\tGrid,\n\tParserOptionsContainer,\n\tPreviewContainer,\n\tPreviewLabel,\n\tRadioBoxLabel,\n\tspinButtonStyles,\n\ttabeLayoutOptionsStyle,\n\tTableFormatContainer,\n\ttextFieldStyles,\n} from './ParserOptionsEditor.styles.js'\nimport type { ParserOptionsEditorProps } from './ParserOptionsEditor.types.js'\n\nconst lineTerminatorOptions = [\n\t{ key: '\\r', text: '\\\\r' },\n\t{ key: '\\r\\n', text: '\\\\r\\\\n' },\n\t{ key: '\\n', text: '\\\\n' },\n]\n\nexport const ParserOptionsEditor: React.FC<ParserOptionsEditorProps> = memo(\n\tfunction ParserOptionsEditor({ dataTable }) {\n\t\tconst table = useDataTableSource(dataTable)\n\t\tconst [headers, { toggle: toggleHeaders }] = useBoolean(\n\t\t\t!dataTable?.parser.names?.length,\n\t\t)\n\n\t\tuseEffect(() => {\n\t\t\tif (headers && !!dataTable?.parser.names?.length) {\n\t\t\t\tdataTable.parser.names = undefined\n\t\t\t}\n\t\t}, [headers, dataTable.parser])\n\n\t\tconst onChangeParser = useCallback(\n\t\t\t(\n\t\t\t\toption: string | boolean | number | string[] | undefined,\n\t\t\t\toptName: string,\n\t\t\t) => {\n\t\t\t\tif (!dataTable) return // eslint-disable-next-line\n\t\t\t\t;(dataTable.parser as any)[optName] = option\n\t\t\t},\n\t\t\t[dataTable],\n\t\t)\n\n\t\tconst onChangeOrientation = useCallback(\n\t\t\t(orientation: DataOrientation) => {\n\t\t\t\tif (!dataTable) return\n\t\t\t\tdataTable.shape.orientation = orientation\n\t\t\t},\n\t\t\t[dataTable],\n\t\t)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<ParserOptionsContainer>\n\t\t\t\t\t<TableFormatContainer>\n\t\t\t\t\t\t{dataTable?.format === DataFormat.CSV ? (\n\t\t\t\t\t\t\t<Grid>\n\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t\t<RadioBoxLabel>Delimiter</RadioBoxLabel>\n\t\t\t\t\t\t\t\t\t<TableDelimiterOptions\n\t\t\t\t\t\t\t\t\t\tselected={dataTable.parser?.delimiter}\n\t\t\t\t\t\t\t\t\t\tonChange={(delim: string) =>\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(delim, 'delimiter')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t\t<RadioBoxLabel>Line terminator</RadioBoxLabel>\n\t\t\t\t\t\t\t\t\t<ChoiceGroup\n\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\ttitle=\"Option temporarily disabled\"\n\t\t\t\t\t\t\t\t\t\tselectedKey={dataTable.parser.lineTerminator}\n\t\t\t\t\t\t\t\t\t\toptions={lineTerminatorOptions}\n\t\t\t\t\t\t\t\t\t\tonChange={(_, option) =>\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(option?.key, 'lineTerminator')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tstyles={choiceGroupStyles}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t<FieldContainer>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Quote char\"\n\t\t\t\t\t\t\t\t\t\tstyles={textFieldStyles}\n\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\ttitle=\"Option temporarily disabled\"\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) => onChangeParser(value, 'quoteChar')}\n\t\t\t\t\t\t\t\t\t\tvalue={dataTable.parser.quoteChar}\n\t\t\t\t\t\t\t\t\t></TextField>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tstyles={textFieldStyles}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Escape char\"\n\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\ttitle=\"Option temporarily disabled\"\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) => onChangeParser(value, 'escapeChar')}\n\t\t\t\t\t\t\t\t\t\tvalue={dataTable.parser.escapeChar}\n\t\t\t\t\t\t\t\t\t></TextField>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tlabel=\"Comment\"\n\t\t\t\t\t\t\t\t\t\tstyles={textFieldStyles}\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) => {\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(value || undefined, 'comment')\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvalue={dataTable.parser.comment || ''}\n\t\t\t\t\t\t\t\t\t></TextField>\n\t\t\t\t\t\t\t\t\t<SpinButton\n\t\t\t\t\t\t\t\t\t\tstyles={spinButtonStyles}\n\t\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Skip rows\"\n\t\t\t\t\t\t\t\t\t\tvalue={dataTable.parser.skipRows.toString()}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) =>\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(+(value as string), 'skipRows')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tincrementButtonAriaLabel=\"Increase value by 1\"\n\t\t\t\t\t\t\t\t\t\tdecrementButtonAriaLabel=\"Decrease value by 1\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<SpinButton\n\t\t\t\t\t\t\t\t\t\tstyles={spinButtonStyles}\n\t\t\t\t\t\t\t\t\t\tlabelPosition={Position.top}\n\t\t\t\t\t\t\t\t\t\tlabel=\"Read rows\"\n\t\t\t\t\t\t\t\t\t\tvalue={dataTable.parser.readRows.toString()}\n\t\t\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) =>\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(+(value as string), 'readRows')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tincrementButtonAriaLabel=\"Increase value by 1\"\n\t\t\t\t\t\t\t\t\t\tdecrementButtonAriaLabel=\"Decrease value by 1\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldContainer>\n\n\t\t\t\t\t\t\t\t<FieldContainer style={checkboxContainerStyle}>\n\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\tlabel=\"Skip blank lines\"\n\t\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t\t\ttitle=\"Option temporarily disabled\"\n\t\t\t\t\t\t\t\t\t\tchecked={dataTable.parser.skipBlankLines}\n\t\t\t\t\t\t\t\t\t\tonChange={(_, value) =>\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(value, 'skipBlankLines')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<HeadersOption\n\t\t\t\t\t\t\t\t\t\theaders={dataTable.parser.names}\n\t\t\t\t\t\t\t\t\t\theadersChecked={headers}\n\t\t\t\t\t\t\t\t\t\ttoggleHeaders={toggleHeaders}\n\t\t\t\t\t\t\t\t\t\tonChange={(value: string[] | undefined) => {\n\t\t\t\t\t\t\t\t\t\t\tonChangeParser(value, 'names')\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldContainer>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<TableLayoutOptions\n\t\t\t\t\t\t\t\tstyles={tabeLayoutOptionsStyle}\n\t\t\t\t\t\t\t\tselected={dataTable.shape.orientation}\n\t\t\t\t\t\t\t\tonChange={onChangeOrientation}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableFormatContainer>\n\t\t\t\t</ParserOptionsContainer>\n\t\t\t\t<PreviewContainer>\n\t\t\t\t\t<PreviewLabel>Preview</PreviewLabel>\n\t\t\t\t\t{table?.table && <TablePreview table={table.table} />}\n\t\t\t\t</PreviewContainer>\n\t\t\t</Container>\n\t\t)\n\t},\n)\n\nexport const HeadersOption: React.FC<{\n\theaders: string[] | undefined\n\tonChange: (val: string[] | undefined) => void\n\theadersChecked: boolean\n\ttoggleHeaders: () => void\n}> = memo(function HeadersOption({\n\theadersChecked,\n\ttoggleHeaders,\n\theaders,\n\tonChange,\n}) {\n\tconst [value, setValue] = useState(headers?.join(','))\n\n\tconst handleValueChange = useDebounceFn(\n\t\t() => {\n\t\t\tonChange(value?.trim().split(','))\n\t\t},\n\t\t{ wait: 1000 },\n\t)\n\n\tconst onChangeValue = useCallback(\n\t\t(\n\t\t\t_: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n\t\t\tval?: string,\n\t\t) => {\n\t\t\tsetValue(val)\n\t\t\thandleValueChange.run() // eslint-disable-line\n\t\t},\n\t\t[setValue, handleValueChange],\n\t)\n\n\treturn (\n\t\t<FieldContainer style={checkboxContainerStyle}>\n\t\t\t<Checkbox\n\t\t\t\tlabel=\"Headers\"\n\t\t\t\tchecked={headersChecked}\n\t\t\t\tonChange={toggleHeaders}\n\t\t\t/>\n\t\t\t{!headersChecked && <TextField value={value} onChange={onChangeValue} />}\n\t\t</FieldContainer>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const dropdownStyles = {\n\troot: {\n\t\twidth: 220,\n\t},\n}\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px;\n`\n\nexport const InputsBlock = styled.div``\n\nexport const Row = styled.div``\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { Label, TextField, Toggle } from '@fluentui/react'\n\nimport { dropdownStyles } from '../styles.js'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nexport const leftStyles = {\n\troot: {\n\t\t...dropdownStyles.root,\n\t},\n}\n\nexport const TextValue = styled(TextField)`\n\tdisplay: inline;\n\twidth: 135px;\n`\n\nexport const OrLabel = styled(Label)`\n\tdisplay: inline;\n\tfont-style: italic;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tborder-left: 1px solid ${({ theme }) => theme.palette.neutralTertiaryAlt};\n`\n\nexport const FilterContainer = styled.div`\n\tmargin-top: 8px;\n\tmargin-left: 16px;\n`\n\nexport const BooleanToggle = styled(Toggle)`\n\tmargin-top: 5px;\n`\n\nexport const InputLabel = styled.div`\n\twidth: 68px;\n`\n\nexport const spinStyles = {\n\troot: {\n\t\twidth: 135,\n\t},\n}\n\nexport const Input = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport {\n\tBooleanComparisonOperator,\n\tDataType,\n\tDateComparisonOperator,\n\tFilterCompareType,\n\tNumericComparisonOperator,\n\tStringComparisonOperator,\n} from '@datashaper/schema'\nimport { EnumDropdown } from '@essex/components'\nimport type { IComboBoxOption, IDropdownOption } from '@fluentui/react'\nimport { IconButton, SpinButton } from '@fluentui/react'\nimport { memo, useCallback, useMemo, useState } from 'react'\n\nimport {\n\tuseColumnNames,\n\tuseSimpleDropdownOptions,\n} from '../../../../hooks/index.js'\nimport {\n\tCalendarPicker,\n\tColumnCriteriaComboBox,\n} from '../../../controls/index.js'\nimport { InputExplainer, LeftAlignedRow } from '../styles.js'\nimport { useColumnTyping, useIsEmpty } from './FilterFunction.hooks.js'\nimport {\n\tBooleanToggle,\n\tContainer,\n\tFilterContainer,\n\tInput,\n\tInputLabel,\n\tleftStyles,\n\tOrLabel,\n\tspinStyles,\n\tTextValue,\n} from './FilterFunction.styles.js'\nimport type { FilterFunctionProps } from './FilterFunction.types.js'\n\n/**\n * Just the comparison logic/ops for a filter.\n * Input table and source column is expected to be edited elsewhere and configured as the step input.\n * This is split out from FilterInputs to allow just the comparison logic to be reused elsewhere.\n */\nexport const FilterFunction: React.FC<FilterFunctionProps> = memo(\n\tfunction FilterFunction({ table, column, criterion, onChange }) {\n\t\tconst handleOpChange = useCallback(\n\t\t\t(_e: React.FormEvent<HTMLDivElement>, opt?: IDropdownOption) => {\n\t\t\t\tonChange &&\n\t\t\t\t\tonChange({\n\t\t\t\t\t\t...criterion,\n\t\t\t\t\t\toperator: opt?.key as\n\t\t\t\t\t\t\t| StringComparisonOperator\n\t\t\t\t\t\t\t| NumericComparisonOperator\n\t\t\t\t\t\t\t| BooleanComparisonOperator\n\t\t\t\t\t\t\t| DateComparisonOperator,\n\t\t\t\t\t})\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst onSelectDate = useCallback(\n\t\t\t(date: Date): void => {\n\t\t\t\tconst update = {\n\t\t\t\t\t...criterion,\n\t\t\t\t\ttype: FilterCompareType.Value,\n\t\t\t\t\tvalue: date,\n\t\t\t\t}\n\t\t\t\tonChange?.(update)\n\t\t\t\tsetCleanLabel(false)\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst handleDateComboBoxChange = useCallback(\n\t\t\t(\n\t\t\t\t_e: any,\n\t\t\t\toption: IComboBoxOption | undefined,\n\t\t\t\t_index: number | undefined,\n\t\t\t\tvalue: string | undefined,\n\t\t\t) => {\n\t\t\t\tconst update = {\n\t\t\t\t\t...criterion,\n\t\t\t\t\ttype: FilterCompareType.Column,\n\t\t\t\t\tvalue: option ? option.key : value,\n\t\t\t\t}\n\t\t\t\tonChange?.(update)\n\n\t\t\t\tsetCleanLabel(true)\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst handleComboBoxChange = useCallback(\n\t\t\t(\n\t\t\t\t_e: any,\n\t\t\t\toption: IComboBoxOption | undefined,\n\t\t\t\t_index: number | undefined,\n\t\t\t\tvalue: string | undefined,\n\t\t\t) => {\n\t\t\t\tconst update = {\n\t\t\t\t\t...criterion,\n\t\t\t\t\ttype: FilterCompareType.Column,\n\t\t\t\t\tvalue: option ? option.key : value,\n\t\t\t\t}\n\t\t\t\tonChange?.(update)\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst onChangeTextFieldValue = useCallback(\n\t\t\t(\n\t\t\t\t_event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n\t\t\t\tnewValue?: string,\n\t\t\t) => {\n\t\t\t\tconst update = {\n\t\t\t\t\t...criterion,\n\t\t\t\t\ttype: FilterCompareType.Value,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t}\n\t\t\t\tonChange?.(update)\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst spinButtonOnChange = useCallback(\n\t\t\t(_event: React.SyntheticEvent<HTMLElement>, newValue?: string) => {\n\t\t\t\tif (newValue != null) {\n\t\t\t\t\tconst update = {\n\t\t\t\t\t\t...criterion,\n\t\t\t\t\t\ttype: FilterCompareType.Value,\n\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t}\n\t\t\t\t\tonChange?.(update)\n\t\t\t\t}\n\t\t\t},\n\t\t\t[criterion, onChange],\n\t\t)\n\n\t\tconst onToggleChange = (\n\t\t\t_ev: React.MouseEvent<HTMLElement>,\n\t\t\tchecked?: boolean,\n\t\t) => {\n\t\t\tconst update = {\n\t\t\t\t...criterion,\n\t\t\t\ttype: FilterCompareType.Value,\n\t\t\t\tvalue: checked,\n\t\t\t}\n\t\t\tonChange?.(update)\n\t\t}\n\n\t\tconst { type, columnFilter } = useColumnTyping(table, column)\n\t\tconst [cleanLabel, setCleanLabel] = useState<boolean>(false)\n\n\t\tconst operatorDropdown = useMemo(() => {\n\t\t\tconst shared = {\n\t\t\t\tlabel: '',\n\t\t\t\tplaceholder: 'Choose',\n\t\t\t\tselectedKey: criterion.operator,\n\t\t\t\tonChange: handleOpChange,\n\t\t\t\tstyles: leftStyles,\n\t\t\t}\n\t\t\tif (column) {\n\t\t\t\tif (type === DataType.String) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<EnumDropdown enumeration={StringComparisonOperator} {...shared} />\n\t\t\t\t\t)\n\t\t\t\t} else if (type === DataType.Boolean) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<EnumDropdown enumeration={BooleanComparisonOperator} {...shared} />\n\t\t\t\t\t)\n\t\t\t\t} else if (type === DataType.Date) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<EnumDropdown enumeration={DateComparisonOperator} {...shared} />\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// map to nicer \"math like\" terse labels for numeric operations\n\t\t\t// (the default will use the friendly enum keys)\n\t\t\tconst labels = {\n\t\t\t\t'=': '=',\n\t\t\t\t'!=': '!=',\n\t\t\t\t'<': '<',\n\t\t\t\t'<=': '<=',\n\t\t\t\t'>': '>',\n\t\t\t\t'>=': '>=',\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<EnumDropdown\n\t\t\t\t\tenumeration={NumericComparisonOperator}\n\t\t\t\t\t{...shared}\n\t\t\t\t\tlabels={labels}\n\t\t\t\t/>\n\t\t\t)\n\t\t}, [type, column, criterion, handleOpChange])\n\n\t\tconst isEmpty = useIsEmpty(criterion)\n\t\tconst handleDeleteClick = useCallback(() => onChange?.(), [onChange])\n\t\tconst columns = useColumnNames(table, columnFilter)\n\t\tconst columnOptions = useSimpleDropdownOptions(columns)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<LeftAlignedRow>\n\t\t\t\t\t{operatorDropdown}\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ttitle={'Remove this criterion'}\n\t\t\t\t\t\ticonProps={deleteIconProps}\n\t\t\t\t\t\tonClick={handleDeleteClick}\n\t\t\t\t\t/>\n\t\t\t\t</LeftAlignedRow>\n\n\t\t\t\t<FilterContainer>\n\t\t\t\t\t<Input>\n\t\t\t\t\t\t<InputLabel>value</InputLabel>\n\t\t\t\t\t\t{type === DataType.Date ? (\n\t\t\t\t\t\t\t<CalendarPicker\n\t\t\t\t\t\t\t\tonSelectDate={onSelectDate}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t\tcleanLabel={cleanLabel}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{type === DataType.String ? (\n\t\t\t\t\t\t\t<TextValue\n\t\t\t\t\t\t\t\tvalue={criterion.value}\n\t\t\t\t\t\t\t\tonChange={onChangeTextFieldValue}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t></TextValue>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{type === DataType.Number ? (\n\t\t\t\t\t\t\t<SpinButton\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\tvalue={criterion.value}\n\t\t\t\t\t\t\t\tstyles={spinStyles}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t\tonChange={spinButtonOnChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{type === DataType.Boolean ? (\n\t\t\t\t\t\t\t<BooleanToggle\n\t\t\t\t\t\t\t\tdefaultChecked\n\t\t\t\t\t\t\t\tonText=\"True\"\n\t\t\t\t\t\t\t\toffText=\"False\"\n\t\t\t\t\t\t\t\tonChange={onToggleChange}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</Input>\n\t\t\t\t\t<OrLabel>or</OrLabel>\n\t\t\t\t\t<Input>\n\t\t\t\t\t\t<InputLabel>column</InputLabel>\n\t\t\t\t\t\t{type === DataType.Date ? (\n\t\t\t\t\t\t\t<ColumnCriteriaComboBox\n\t\t\t\t\t\t\t\toptions={columnOptions}\n\t\t\t\t\t\t\t\tonChange={handleDateComboBoxChange}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ColumnCriteriaComboBox\n\t\t\t\t\t\t\t\toptions={columnOptions}\n\t\t\t\t\t\t\t\tonChange={handleComboBoxChange}\n\t\t\t\t\t\t\t\tdisabled={isEmpty}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Input>\n\t\t\t\t</FilterContainer>\n\n\t\t\t\t{type === DataType.String ? (\n\t\t\t\t\t<InputExplainer>\n\t\t\t\t\t\tString comparisons are not case-sensitive\n\t\t\t\t\t</InputExplainer>\n\t\t\t\t) : null}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n\nconst deleteIconProps = { iconName: 'Delete' }\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n`\n\nexport const Vertical = styled.div<{ index: number }>`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px;\n\tmargin-top: ${({ index }) => (index > 0 ? 6 : 0)}px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { Criterion, FilterArgs } from '@datashaper/schema'\nimport { BooleanOperator } from '@datashaper/schema'\nimport { EnumDropdown } from '@essex/components'\nimport { ActionButton, Label } from '@fluentui/react'\nimport type ColumnTable from 'arquero/dist/types/table/column-table'\nimport { memo, useCallback } from 'react'\n\nimport { EMPTY_ARRAY } from '../../../../empty.js'\nimport {\n\tuseDropdownChangeHandler,\n\tuseStepDataTable,\n} from '../../../../hooks/index.js'\nimport { FilterFunction } from '../shared/index.js'\nimport { LeftAlignedRow } from '../styles.js'\nimport type { StepFormProps } from '../types.js'\nimport { Container, Vertical } from './FilterForm.styles.js'\n\n/**\n * Provides inputs for a Filter step.\n */\nexport const FilterForm: React.FC<StepFormProps<FilterArgs>> = memo(\n\tfunction FilterForm({ step, workflow, input, table, onChange }) {\n\t\tconst dataTable = useStepDataTable(step, workflow, input, table)\n\t\tconst handleButtonClick = useCallback(() => {\n\t\t\tonChange?.({\n\t\t\t\t...step,\n\t\t\t\targs: {\n\t\t\t\t\t...step.args,\n\t\t\t\t\tcriteria: [...(step.args.criteria || EMPTY_ARRAY), {} as Criterion],\n\t\t\t\t},\n\t\t\t})\n\t\t}, [step, onChange])\n\n\t\tconst handleFilterChange = useCallback(\n\t\t\t(criterion: Criterion | undefined, index: number) => {\n\t\t\t\tconst criteria = [...step.args.criteria]\n\t\t\t\tif (criterion == null) {\n\t\t\t\t\tcriteria.splice(index, 1)\n\t\t\t\t} else {\n\t\t\t\t\tcriteria[index] = criterion\n\t\t\t\t}\n\t\t\t\tonChange?.({\n\t\t\t\t\t...step,\n\t\t\t\t\targs: {\n\t\t\t\t\t\t...step.args,\n\t\t\t\t\t\tcriteria,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t},\n\t\t\t[step, onChange],\n\t\t)\n\n\t\tconst handleLogicalChange = useDropdownChangeHandler(\n\t\t\tstep,\n\t\t\t(s, val) => (s.args.logical = val as BooleanOperator),\n\t\t\tonChange,\n\t\t)\n\t\tconst filters = useFilters(\n\t\t\tdataTable,\n\t\t\tstep.args.column,\n\t\t\tstep.args.criteria,\n\t\t\thandleFilterChange,\n\t\t)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Label>Function</Label>\n\t\t\t\t{filters}\n\t\t\t\t<ActionButton\n\t\t\t\t\tonClick={handleButtonClick}\n\t\t\t\t\ticonProps={addIconProps}\n\t\t\t\t\tdisabled={!dataTable}\n\t\t\t\t>\n\t\t\t\t\tAdd criteria\n\t\t\t\t</ActionButton>\n\t\t\t\t{step.args.criteria.length > 1 ? (\n\t\t\t\t\t<LeftAlignedRow>\n\t\t\t\t\t\t<EnumDropdown\n\t\t\t\t\t\t\tlabel={'Logical combination'}\n\t\t\t\t\t\t\tplaceholder={'Choose boolean'}\n\t\t\t\t\t\t\tenumeration={BooleanOperator}\n\t\t\t\t\t\t\tlabels={{\n\t\t\t\t\t\t\t\tor: 'OR',\n\t\t\t\t\t\t\t\tand: 'AND',\n\t\t\t\t\t\t\t\tnor: 'NOR',\n\t\t\t\t\t\t\t\tnand: 'NAND',\n\t\t\t\t\t\t\t\txor: 'XOR',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tselectedKey={step.args.logical}\n\t\t\t\t\t\t\tonChange={handleLogicalChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LeftAlignedRow>\n\t\t\t\t) : null}\n\t\t\t</Container>\n\t\t)\n\t},\n)\n\nfunction useFilters(\n\ttable: ColumnTable | undefined,\n\tcolumn: string,\n\tcriteria: Criterion[],\n\tonChange: any,\n) {\n\tif (!table) {\n\t\treturn null\n\t}\n\n\treturn criteria.map((criterion, index) => {\n\t\tconst handleChange = (f?: Criterion) => onChange(f, index)\n\t\treturn (\n\t\t\t<Vertical key={`filter-function-${index}`} index={index}>\n\t\t\t\t<FilterFunction\n\t\t\t\t\ttable={table}\n\t\t\t\t\tcolumn={column}\n\t\t\t\t\tcriterion={criterion}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t/>\n\t\t\t</Vertical>\n\t\t)\n\t})\n}\n\nconst addIconProps = { iconName: 'Add' }\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const icons = {\n\tadd: { iconName: 'Add' },\n\tdelete: { iconName: 'Delete' },\n}\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nexport const Tables = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { Step, Workflow } from '@datashaper/workflow'\nimport { IconButton } from '@fluentui/react'\nimport { useMemo } from 'react'\n\nimport { useTableDropdownOptions } from '../../../../hooks/index.js'\nimport { TableDropdown } from '../../../controls/index.js'\nimport { LeftAlignedRow } from '../styles.js'\nimport { icons } from './SetOperationForm.styles.js'\n\nexport function useOthers(\n\tstep: Step,\n\tonChange?: (step: Step) => void,\n\tstore?: Workflow,\n): (JSX.Element | null)[] {\n\tconst tableOptions = useTableDropdownOptions(store)\n\treturn useMemo<(JSX.Element | null)[]>(() => {\n\t\treturn (step.input.others || EMPTY).map((input, index) => {\n\t\t\tconst other = input.node\n\n\t\t\t// on delete, remove the input\n\t\t\tconst handleDeleteClick = () => {\n\t\t\t\tonChange?.({\n\t\t\t\t\t...step,\n\t\t\t\t\tinput: {\n\t\t\t\t\t\t...step.input,\n\t\t\t\t\t\tothers: (step.input.others || EMPTY).filter(o => o !== input),\n\t\t\t\t\t} as Step['input'],\n\t\t\t\t})\n\t\t\t}\n\t\t\tif (!store) {\n\t\t\t\treturn null\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<LeftAlignedRow key={`set-op-${other}-${index}`}>\n\t\t\t\t\t<TableDropdown\n\t\t\t\t\t\tlabel={''}\n\t\t\t\t\t\toptions={tableOptions}\n\t\t\t\t\t\tselectedKey={other}\n\t\t\t\t\t\tonChange={(_evt, option) => {\n\t\t\t\t\t\t\tconst update = { ...step }\n\t\t\t\t\t\t\tif (option) {\n\t\t\t\t\t\t\t\tinput.node = `${option.key}`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonChange?.(update)\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ttitle={'Remove this table'}\n\t\t\t\t\t\ticonProps={icons.delete}\n\t\t\t\t\t\tonClick={handleDeleteClick}\n\t\t\t\t\t/>\n\t\t\t\t</LeftAlignedRow>\n\t\t\t)\n\t\t})\n\t}, [step, store, tableOptions, onChange])\n}\n\nconst EMPTY: any[] = []\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tjustify-content: flex-start;\n`\n\nexport const icons = {\n\tdelete: { iconName: 'Delete' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nexport const Sorts = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n`\n\nexport const icons = {\n\tadd: { iconName: 'Add' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { RecodeArgs, Value } from '@datashaper/schema'\nimport { DataType } from '@datashaper/schema'\nimport styled from '@essex/styled-components'\nimport { ActionButton } from '@fluentui/react'\nimport { memo, useCallback } from 'react'\n\nimport { useMappingPairs } from '../../../../hooks/controls/useMappingPairs.js'\nimport {\n\tuseColumnType,\n\tuseHandleDelete,\n\tuseHandleKeyChange,\n\tuseHandleValueChange,\n\tuseStepDataTable,\n} from '../../../../hooks/index.js'\nimport type { StepFormProps } from '../types.js'\nimport {\n\tuseColumnValues,\n\tuseDisabled,\n\tuseHandleAddButtonClick,\n} from './RecodeForm.hooks.js'\n\n/**\n * Provides inputs for a RecodeStep.\n */\nexport const RecodeForm: React.FC<StepFormProps<RecodeArgs>> = memo(\n\tfunction RecodeForm({ step, workflow, input, table, onChange }) {\n\t\tconst dataTable = useStepDataTable(step, workflow, input, table)\n\t\tconst dataType = useColumnType(dataTable, step.args.column)\n\t\tconst initialValues = useColumnValues(step, dataTable)\n\t\tconst values =\n\t\t\tdataType === DataType.Date\n\t\t\t\t? initialValues.map(e => e.toISOString())\n\t\t\t\t: initialValues\n\n\t\tconst onUpdateMapping = useCallback(\n\t\t\t(mapping: Record<Value, Value>) => {\n\t\t\t\tonChange?.({\n\t\t\t\t\t...step,\n\t\t\t\t\targs: {\n\t\t\t\t\t\t...step.args,\n\t\t\t\t\t\tmapping,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t},\n\t\t\t[onChange, step],\n\t\t)\n\n\t\tconst handleRecodeKeyChange = useHandleKeyChange(\n\t\t\tstep.args.mapping,\n\t\t\tonUpdateMapping,\n\t\t)\n\t\tconst handleRecodeValueChange = useHandleValueChange(\n\t\t\tstep.args.mapping,\n\t\t\tdataType,\n\t\t\tonUpdateMapping,\n\t\t)\n\t\tconst handleRecodeDelete = useHandleDelete(\n\t\t\tstep.args.mapping,\n\t\t\tonUpdateMapping,\n\t\t)\n\t\tconst handleButtonClick = useHandleAddButtonClick(step, values, onChange)\n\n\t\tconst columnPairs = useMappingPairs(\n\t\t\tstep.args.mapping,\n\t\t\tdataType,\n\t\t\thandleRecodeKeyChange,\n\t\t\thandleRecodeValueChange,\n\t\t\thandleRecodeDelete,\n\t\t)\n\n\t\tconst disabled = useDisabled(step, values)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<ColumnPairs>{columnPairs}</ColumnPairs>\n\t\t\t\t<ActionButton\n\t\t\t\t\tonClick={handleButtonClick}\n\t\t\t\t\ticonProps={addIconProps}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t>\n\t\t\t\t\tAdd mapping\n\t\t\t\t</ActionButton>\n\t\t\t</Container>\n\t\t)\n\t},\n)\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\nconst ColumnPairs = styled.div`\n\tmargin-top: 8px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n`\n\nconst addIconProps = { iconName: 'Add' }\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { RenameArgs } from '@datashaper/schema'\nimport type { Step } from '@datashaper/workflow'\nimport styled from '@essex/styled-components'\nimport type { IDropdownOption } from '@fluentui/react'\nimport {\n\tActionButton,\n\tIcon,\n\tIconButton,\n\tLabel,\n\tTextField,\n} from '@fluentui/react'\nimport type ColumnTable from 'arquero/dist/types/table/column-table'\nimport { memo, useMemo } from 'react'\n\nimport { EMPTY_OBJECT } from '../../../../empty.js'\nimport {\n\tuseColumnNames,\n\tuseOnDeleteStepColumn,\n\tuseSimpleDropdownOptions,\n\tuseStepDataTable,\n} from '../../../../hooks/index.js'\nimport { TableColumnDropdown } from '../../../controls/index.js'\nimport { narrowerDropdownStyles } from '../styles.js'\nimport type { StepFormProps } from '../types.js'\nimport {\n\tuseDisabled,\n\tuseHandleAddButtonClick,\n\tuseHandleColumnChange,\n} from './RenameForm.hooks.js'\n\n/**\n * Provides inputs for a RenameStep.\n */\nexport const RenameForm: React.FC<StepFormProps<RenameArgs>> = memo(\n\tfunction RenameForm({ step, workflow, input, table, onChange }) {\n\t\tconst dataTable = useStepDataTable(step, workflow, input, table)\n\t\tconst handleColumnChange = useHandleColumnChange(step, onChange)\n\t\tconst handleColumnDelete = useOnDeleteStepColumn(step, onChange)\n\t\tconst handleButtonClick = useHandleAddButtonClick(step, dataTable, onChange)\n\t\tconst columnPairs = useColumnPairs(\n\t\t\tdataTable,\n\t\t\tstep,\n\t\t\thandleColumnChange,\n\t\t\thandleColumnDelete,\n\t\t)\n\t\tconst disabled = useDisabled(step, dataTable)\n\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Label required>Column renames</Label>\n\t\t\t\t<ColumnPairs>{columnPairs}</ColumnPairs>\n\t\t\t\t<ActionButton\n\t\t\t\t\tonClick={handleButtonClick}\n\t\t\t\t\ticonProps={addIconProps}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t>\n\t\t\t\t\tAdd rename\n\t\t\t\t</ActionButton>\n\t\t\t</Container>\n\t\t)\n\t},\n)\n\nfunction useColumnPairs(\n\ttable: ColumnTable | undefined,\n\tstep: Step<RenameArgs>,\n\tonChange: (previous: string, oldName: string, newName: string) => void,\n\tonDelete: (name: string) => void,\n) {\n\treturn useMemo(() => {\n\t\tconst { columns } = step.args\n\t\treturn Object.entries(columns || EMPTY_OBJECT).map((column, index) => {\n\t\t\tconst [oldname] = column\n\t\t\treturn (\n\t\t\t\t<ColumnPair\n\t\t\t\t\tkey={`column-rename-${oldname}-${index}`}\n\t\t\t\t\ttable={table}\n\t\t\t\t\tcolumn={column}\n\t\t\t\t\tstep={step}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tonDelete={onDelete}\n\t\t\t\t/>\n\t\t\t)\n\t\t})\n\t}, [table, step, onChange, onDelete])\n}\n\nconst ColumnPair: React.FC<{\n\ttable: ColumnTable | undefined\n\tcolumn: [string, string]\n\tstep: Step<RenameArgs>\n\tonChange: (previous: string, oldName: string, newName: string) => void\n\tonDelete: (name: string) => void\n}> = memo(function ColumnPair({ table, column, step, onChange, onDelete }) {\n\tconst [oldname, newname] = column\n\tconst columnFilter = (name: string) => {\n\t\tif (name === oldname) {\n\t\t\treturn true\n\t\t}\n\t\tif (step.args.columns && step.args.columns[name]) {\n\t\t\treturn false\n\t\t}\n\t\treturn true\n\t}\n\tconst handleColumnChange = (\n\t\t_e: React.FormEvent<HTMLDivElement>,\n\t\topt?: IDropdownOption<any> | undefined,\n\t) => onChange(oldname, (opt?.key as string) || oldname, newname)\n\tconst handleTextChange = (\n\t\t_e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n\t\tnewValue?: string,\n\t) => {\n\t\tonChange(oldname, oldname, newValue ?? '')\n\t}\n\tconst handleDeleteClick = () => onDelete(oldname)\n\tconst columns = useColumnNames(table, columnFilter)\n\tconst options = useSimpleDropdownOptions(columns)\n\n\treturn (\n\t\t<ColumnPairContainer>\n\t\t\t<TableColumnDropdown\n\t\t\t\toptions={options}\n\t\t\t\tlabel={undefined}\n\t\t\t\tselectedKey={oldname}\n\t\t\t\tonChange={handleColumnChange}\n\t\t\t\tstyles={narrowerDropdownStyles}\n\t\t\t/>\n\t\t\t<Icon\n\t\t\t\ticonName={'Forward'}\n\t\t\t\tstyles={{ root: { marginLeft: 4, marginRight: 4 } }}\n\t\t\t/>\n\t\t\t<TextField\n\t\t\t\tplaceholder={'New name'}\n\t\t\t\tvalue={newname}\n\t\t\t\tonChange={handleTextChange}\n\t\t\t\tstyles={narrowerDropdownStyles}\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\ttitle={'Remove this rename'}\n\t\t\t\ticonProps={deleteIconProps}\n\t\t\t\tonClick={handleDeleteClick}\n\t\t\t/>\n\t\t</ColumnPairContainer>\n\t)\n})\n\nconst Container = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nconst ColumnPairs = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n`\n\nconst ColumnPairContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: flex-start;\n\talign-items: center;\n`\n\nconst addIconProps = { iconName: 'Add' }\nconst deleteIconProps = { iconName: 'Delete' }\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { Label } from '@fluentui/react'\n\nexport const Container = styled.div`\n\tmargin-top: 8px;\n\tmargin-left: 16px;\n`\n\nexport const Input = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n`\n\nexport const InputLabel = styled.div`\n\twidth: 84px;\n`\n\nexport const OrLabel = styled(Label)`\n\tdisplay: inline;\n\tfont-style: italic;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tborder-left: 1px solid ${({ theme }) => theme.palette.neutralTertiaryAlt};\n`\n\nexport const spinStyles = {\n\troot: {\n\t\twidth: 120,\n\t},\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type {\n\tInputColumnArgs,\n\tInputColumnListArgs,\n\tOutputColumnArgs,\n} from '@datashaper/schema'\nimport {\n\tisInputColumnListStep,\n\tisInputColumnStep,\n\tisOutputColumnStep,\n\tNodeInput,\n} from '@datashaper/workflow'\nimport { MultiDropdown } from '@essex/components'\nimport { TextField } from '@fluentui/react'\nimport { memo } from 'react'\n\nimport { useColumnNames } from '../../hooks/columns/useColumnNames.js'\nimport { useSimpleDropdownOptions } from '../../hooks/fluent/useSimpleDropdownOptions.js'\nimport { useWorkflowDataTable } from '../../hooks/index.js'\nimport { TableColumnDropdown } from '../controls/TableColumnDropdown/TableColumnDropdown.js'\nimport { dropdownStyles } from '../styles.js'\nimport {\n\tgetSimpleDropdownOptions,\n\tuseColumnFilter,\n\tuseDefaultOutputNameInitially,\n\tuseInputColumnChanged,\n\tuseInputColumnListAllChanged,\n\tuseInputColumnListChanged,\n\tuseOutputColumnChanged,\n\tuseStepArgsComponent,\n\tuseStepChangeHandler,\n} from './StepForm.hooks.js'\nimport { Container } from './StepForm.styles.js'\nimport type { StepFormProps } from './StepForm.types.js'\n\n/**\n * Let's us render the Steps in a loop while memoing all the functions\n */\nexport const StepForm: React.FC<StepFormProps> = memo(function StepForm({\n\tstep: s,\n\toutput,\n\tworkflow: g,\n\tmetadata,\n\tindex,\n\tonChange,\n\tonChangeOutput: changeOutput,\n\thideInputColumn,\n}) {\n\t/* Current Table Selection */\n\tconst tableId = s.input[NodeInput.Source]?.node\n\tconst table = useWorkflowDataTable(tableId, g)\n\n\t/* Column Options */\n\tconst columns = useColumnNames(table, useColumnFilter(s, table))\n\tconst columnOptions = useSimpleDropdownOptions(columns)\n\n\t/* The step args component */\n\tconst StepArgs = useStepArgsComponent(s)\n\n\t/* Change Events */\n\tconst change = useStepChangeHandler(index, onChange)\n\tconst onInputColumnChange = useInputColumnChanged(s, change, table)\n\tconst onInputColumnListChange = useInputColumnListChanged(s, change)\n\tconst onInputColumnListChangeAll = useInputColumnListAllChanged(s, change)\n\tconst onOutputColumnChange = useOutputColumnChanged(s, change)\n\n\t/* Side Effects */\n\tuseDefaultOutputNameInitially(s, output, changeOutput)\n\n\treturn StepArgs == null ? null : (\n\t\t<Container className=\"step-component\">\n\t\t\t{/* Input Column List */}\n\t\t\t{isInputColumnListStep(s) ? (\n\t\t\t\t<MultiDropdown\n\t\t\t\t\trequired={true}\n\t\t\t\t\tlabel={'Columns'}\n\t\t\t\t\tplaceholder={'Choose columns'}\n\t\t\t\t\tstyles={dropdownStyles}\n\t\t\t\t\tselectedKeys={(s.args as InputColumnListArgs).columns}\n\t\t\t\t\toptions={getSimpleDropdownOptions(columns)}\n\t\t\t\t\tonChange={onInputColumnListChange}\n\t\t\t\t\tonChangeAll={onInputColumnListChangeAll}\n\t\t\t\t/>\n\t\t\t) : null}\n\n\t\t\t{/* Input Column */}\n\t\t\t{!hideInputColumn && isInputColumnStep(s) ? (\n\t\t\t\t<TableColumnDropdown\n\t\t\t\t\trequired\n\t\t\t\t\toptions={columnOptions}\n\t\t\t\t\tlabel={`Column to ${s.verb}`}\n\t\t\t\t\tselectedKey={(s.args as InputColumnArgs).column}\n\t\t\t\t\tonChange={onInputColumnChange}\n\t\t\t\t/>\n\t\t\t) : null}\n\n\t\t\t<StepArgs\n\t\t\t\tstep={s}\n\t\t\t\tworkflow={g}\n\t\t\t\tmetadata={metadata}\n\t\t\t\toutput={output}\n\t\t\t\tonChangeOutput={changeOutput}\n\t\t\t\tonChange={change}\n\t\t\t/>\n\n\t\t\t{/* Output Column */}\n\t\t\t{isOutputColumnStep(s) ? (\n\t\t\t\t<TextField\n\t\t\t\t\trequired\n\t\t\t\t\tlabel={'New column name'}\n\t\t\t\t\tplaceholder={'Column name'}\n\t\t\t\t\tvalue={(s.args as OutputColumnArgs).to}\n\t\t\t\t\tstyles={dropdownStyles}\n\t\t\t\t\tonChange={onOutputColumnChange}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</Container>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from '@essex/styled-components'\n\nexport const icons = {\n\tsave: { iconName: 'CheckMark' },\n\tdelete: { iconName: 'Delete' },\n}\n\nexport const Container = styled.div`\n\tposition: relative;\n`\nexport const Actions = styled.div`\n\tmargin-top: 10px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 0.5rem;\n\twidth: 100%;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type { Step } from '@datashaper/workflow'\nimport { isEqual } from 'lodash-es'\nimport { memo, useMemo, useState } from 'react'\n\nimport { EMPTY_OBJECT } from '../../empty.js'\nimport { Action } from '../controls/index.js'\nimport { StepForm } from '../StepForm/StepForm.js'\nimport {\n\tuseHandleSaveClick,\n\tuseStepOutputHandling,\n} from './StepEditor.hooks.js'\nimport { Actions, Container, icons } from './StepEditor.styles.js'\nimport type { StepEditorProps } from './StepEditor.types.js'\n\nexport const StepEditor: React.FC<StepEditorProps> = memo(function StepEditor({\n\tworkflow,\n\tonSave: execSave,\n\tmetadata,\n\tindex,\n\tstep,\n\tstyle = EMPTY_OBJECT,\n\tonDelete,\n\thideInputColumn,\n}) {\n\tconst [internal, setInternal] = useState<Step | undefined>(step)\n\tconst { output, outputHasChanged, onOutputChanged } = useStepOutputHandling(\n\t\tworkflow,\n\t\tstep,\n\t)\n\tconst onSave = useHandleSaveClick(internal, execSave)\n\tconst noSave = useMemo<boolean>(\n\t\t() => isEqual(step, internal) && !outputHasChanged,\n\t\t[step, internal, outputHasChanged],\n\t)\n\n\treturn (\n\t\t<Container style={style}>\n\t\t\t{internal && (\n\t\t\t\t<>\n\t\t\t\t\t<StepForm\n\t\t\t\t\t\tstep={internal}\n\t\t\t\t\t\tworkflow={workflow}\n\t\t\t\t\t\tmetadata={metadata}\n\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\toutput={output}\n\t\t\t\t\t\thideInputColumn={hideInputColumn}\n\t\t\t\t\t\tonChange={setInternal}\n\t\t\t\t\t\tonChangeOutput={onOutputChanged}\n\t\t\t\t\t/>\n\t\t\t\t\t<Actions>\n\t\t\t\t\t\t<Action onClick={onSave} disabled={noSave} iconProps={icons.save}>\n\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t</Action>\n\t\t\t\t\t\t<Action onClick={onDelete} iconProps={icons.delete}>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</Action>\n\t\t\t\t\t</Actions>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</Container>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\nimport { IconButton } from '@fluentui/react'\n\nexport const Container = styled.div`\n\tposition: relative;\n\n\th1 {\n\t\tmargin-top: 0;\n\t\ttext-transform: uppercase;\n\t\tcolor: ${({ theme }) => theme.palette.neutralTertiary};\n\t}\n\n\th2 {\n\t\tcolor: ${({ theme }) => theme.palette.neutralTertiary};\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 1rem;\n\n\t\t&.active + .details {\n\t\t\topacity: 1;\n\t\t\theight: auto;\n\t\t\ttransform: translateX(0);\n\t\t\toverflow-x: auto;\n\t\t}\n\t}\n\n\ttable {\n\t\tborder-collapse: collapse;\n\n\t\tth {\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\ttd,\n\t\tth {\n\t\t\tborder: 1px solid ${({ theme }) => theme.palette.neutralTertiaryAlt};\n\t\t\tpadding: 5px;\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t.details {\n\t\topacity: 0;\n\t\theight: 0;\n\t\ttransition: transform 0.5s ease-in-out;\n\t\ttransform: translateX(100%);\n\t\toverflow-x: hidden;\n\t}\n`\n\nexport const Icon = styled(IconButton as any)`\n\tfont-size: 2.5rem;\n`\n\nexport const ButtonWrapper = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n`\n\nexport const icons = {\n\tback: { iconName: 'Back' },\n\thome: { iconName: 'Home' },\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from '@essex/styled-components'\n\nconst MAX_HEIGHT = 700\n\nexport const Container = styled.div`\n\twidth: 400px;\n\tmax-height: ${MAX_HEIGHT - 20}px;\n\toverflow: hidden auto;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { default as guidanceIndex } from '@datashaper/verb-guidance'\nimport { memo } from 'react'\n\nimport { Guidance } from '../Guidance/Guidance.js'\nimport { Container } from './GuidanceButton.styles.js'\nimport type { GuidanceButtonProps } from './GuidanceButton.types.js'\n\nexport const GuidanceButton: React.FC<GuidanceButtonProps> = memo(\n\tfunction GuidanceButton({ verb }) {\n\t\treturn verb ? (\n\t\t\t<Container>\n\t\t\t\t<Guidance name={verb} index={guidanceIndex} />\n\t\t\t</Container>\n\t\t) : null\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport styled from '@essex/styled-components'\n\nexport const icons = {\n\tcancel: { iconName: 'Cancel' },\n\tinfo: { iconName: 'Info' },\n}\n\nconst MAX_HEIGHT = 700\n\nexport const ContainerBody = styled.div`\n\tpadding: 0px 12px 14px 24px;\n\tdisplay: flex;\n\tjustify-content: flex-start;\n`\n\nexport const Header = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tbackground: ${({ theme }) => theme.palette.neutralLighter};\n\tmargin-bottom: 12px;\n`\n\nexport const Title = styled.h3`\n\tpadding-left: 12px;\n\tmargin: 8px 0 8px 0;\n`\n\nexport const StepComponentContainer = styled.div`\n\twidth: 300px;\n\tmax-height: ${MAX_HEIGHT}px;\n\toverflow: hidden auto;\n`\n\nexport const GuidanceContainer = styled.div`\n\twidth: 400px;\n\tmax-height: ${MAX_HEIGHT - 20}px;\n\toverflow: hidden auto;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { Callout, DirectionalHint, IconButton, useTheme } from '@fluentui/react'\nimport { useBoolean } from '@fluentui/react-hooks'\nimport { memo } from 'react'\n\nimport { Action } from '../controls/index.js'\nimport { StepEditor } from '../StepEditor/StepEditor.js'\nimport { GuidanceButton } from './GuidanceButton.js'\nimport { useTitle } from './StepEditorModal.hooks.js'\nimport {\n\tContainerBody,\n\tHeader,\n\ticons,\n\tStepComponentContainer,\n\tTitle,\n} from './StepEditorModal.styles.js'\nimport type { StepEditorModalProps } from './StepEditorModal.types.js'\nimport { getModalStyles } from './StepEditorModal.utils.js'\n\nexport const StepEditorModal: React.FC<StepEditorModalProps> = memo(\n\tfunction StepEditorModal({\n\t\tonDismiss,\n\t\tworkflow,\n\t\tmetadata,\n\t\tonSave,\n\t\tindex,\n\t\tstep,\n\t\tstyles,\n\t\t...props\n\t}) {\n\t\tconst theme = useTheme()\n\t\tconst [showGuidance, { toggle: toggleGuidance }] = useBoolean(false)\n\t\tconst adaptedStyles = getModalStyles(theme, styles)\n\t\tconst title = useTitle(step)\n\n\t\treturn (\n\t\t\t<Callout\n\t\t\t\tstyles={adaptedStyles}\n\t\t\t\tdirectionalHint={DirectionalHint.rightBottomEdge}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t<Header>\n\t\t\t\t\t<Title>{title}</Title>\n\t\t\t\t\t<Action\n\t\t\t\t\t\ttype=\"icon\"\n\t\t\t\t\t\tonClick={onDismiss}\n\t\t\t\t\t\ticonProps={icons.cancel}\n\t\t\t\t\t\tariaLabel=\"Close popup modal\"\n\t\t\t\t\t/>\n\t\t\t\t</Header>\n\t\t\t\t<ContainerBody>\n\t\t\t\t\t<StepComponentContainer>\n\t\t\t\t\t\t<StepEditor\n\t\t\t\t\t\t\thideInputColumn\n\t\t\t\t\t\t\tworkflow={workflow}\n\t\t\t\t\t\t\tmetadata={metadata}\n\t\t\t\t\t\t\tonSave={onSave}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</StepComponentContainer>\n\t\t\t\t\t{step?.verb ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tonClick={toggleGuidance}\n\t\t\t\t\t\t\ticonProps={icons.info}\n\t\t\t\t\t\t\tchecked={showGuidance}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{showGuidance && <GuidanceButton verb={step?.verb} />}\n\t\t\t\t</ContainerBody>\n\t\t\t</Callout>\n\t\t)\n\t},\n)\n","/**\n * {@docCategory Dialog}\n */\nexport var DialogType;\n(function (DialogType) {\n    /** Standard dialog */\n    DialogType[DialogType[\"normal\"] = 0] = \"normal\";\n    /** Dialog with large header banner */\n    DialogType[DialogType[\"largeHeader\"] = 1] = \"largeHeader\";\n    /** Dialog with an 'x' close button in the upper-right corner */\n    DialogType[DialogType[\"close\"] = 2] = \"close\";\n})(DialogType || (DialogType = {}));\n//# sourceMappingURL=DialogContent.types.js.map","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\n// TODO: this calc is because the CollapsiblePanel doesn't flex properly to constrain the width.\n// so the total width ends up offset by the width of the chevron\nexport const Container = styled.div`\n\twidth: calc(100% - 24px);\n\tdisplay: flex;\n\tgap: 4px;\n\talign-items: center;\n\tjustify-content: flex-start;\n`\n\nexport const Index = styled.div`\n\tcolor: ${({ theme }) => theme.palette.neutralTertiaryAlt};\n\tfont-size: 12px;\n\ttext-align: right;\n\tmin-width: 20px;\n`\n\nexport const Verb = styled.div<{ selected?: boolean }>`\n\ttext-transform: uppercase;\n\tfont-weight: bold;\n\tcolor: ${({ selected, theme }) =>\n\t\tselected ? theme.palette.themePrimary : theme.palette.neutralSecondary};\n\twhite-space: nowrap;\n`\n\nexport const Details = styled.div`\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-align: left;\n\tcolor: ${({ theme }) => theme.palette.neutralSecondaryAlt};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type {\n\tDeriveArgs,\n\tInputColumnArgs,\n\tInputColumnListArgs,\n\tInputColumnRecordArgs,\n\tOrderbyArgs,\n\tOutputColumnArgs,\n\tPivotArgs,\n\tSampleArgs,\n} from '@datashaper/schema'\nimport { Verb } from '@datashaper/schema'\nimport type { Step } from '@datashaper/workflow'\nimport {\n\tisInputColumnListStep,\n\tisInputColumnRecordStep,\n\tisInputColumnStep,\n\tisInputKeyValueStep,\n\tisInputTableListStep,\n\tisOutputColumnStep,\n} from '@datashaper/workflow'\nimport { format } from 'd3-format'\n\n/**\n * Create reasonable short detail text for a step.\n * For most this will be the column or columns operated on,\n * but we have a few special cases too.\n * @param step\n * @returns\n */\nexport function deriveDetails(step: Step): string | undefined {\n\tconst { verb, args } = step\n\n\t// handle special case verbs first\n\tswitch (verb) {\n\t\tcase Verb.Derive:\n\t\t\treturn `from ${(args as DeriveArgs).column1} & ${\n\t\t\t\t(args as DeriveArgs).column2\n\t\t\t}`\n\t\tcase Verb.Orderby:\n\t\t\treturn (args as OrderbyArgs).orders.map(o => o.column).join(',')\n\t\tcase Verb.Sample:\n\t\t\treturn sample(step)\n\t}\n\n\tif (isInputColumnStep(step)) {\n\t\treturn (args as InputColumnArgs).column\n\t} else if (isInputColumnListStep(step)) {\n\t\treturn (args as InputColumnListArgs).columns.join(',')\n\t} else if (isInputColumnRecordStep(step)) {\n\t\treturn Object.keys((args as InputColumnRecordArgs).columns).join(',')\n\t} else if (isInputKeyValueStep(step)) {\n\t\treturn `${(args as PivotArgs).key} & ${(args as PivotArgs).value}`\n\t} else if (isOutputColumnStep(step)) {\n\t\treturn (args as OutputColumnArgs).to\n\t} else if (isInputTableListStep(step)) {\n\t\tconst others = step.input['other']\n\t\t\t? step.input['other'].node\n\t\t\t: step.input.others?.map(o => o.node).join(',')\n\t\treturn 'with ' + others\n\t}\n}\n\nconst whole = format('d')\n\nfunction sample(step: Step): string {\n\tconst args = step.args as SampleArgs\n\treturn args.proportion\n\t\t? `${whole(args.proportion * 100)}% of rows`\n\t\t: `${args.size} rows`\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from '@essex/styled-components'\n\nexport const buttonStyles = { width: 100 }\n\nexport const icons = {\n\tpreview: { iconName: 'View' },\n\tadd: { iconName: 'Add' },\n\tchevronRight: { iconName: 'ChevronRight' },\n\tchevronDown: { iconName: 'ChevronDown' },\n\tinfo: { iconName: 'Info' },\n}\n\nexport const Container = styled.div`\n\twidth: 100%;\n\theight: 100%;\n`\n\nexport const ButtonContainer = styled.div`\n\tpadding: 8px;\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tborder-bottom: 1px solid ${({ theme }) => theme.palette.neutralQuaternaryAlt};\n`\n\nexport const StepsContainer = styled.div``\n\nexport const tableTransformStyle: React.CSSProperties = {\n\tdisplay: 'flex',\n\talignItems: 'center',\n\tflexDirection: 'column',\n\toverflow: 'auto',\n\tborder: 'none',\n\twidth: 'auto',\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport type {\n\tArqueroTableHeaderStyles,\n\tCommandBarColors,\n\tTableCommandsProps,\n} from '@datashaper/react'\nimport type { ToolPanelStyles } from '@essex/components'\nimport type { ICommandBarStyles, ITheme } from '@fluentui/react'\nimport { useTheme } from '@fluentui/react'\nimport { useMemo } from 'react'\nimport styled from 'styled-components'\n\nconst HEADER_HEIGHT = 36\n\nexport const icons = {\n\thistory: { iconName: 'History' },\n}\n\nexport const DetailsListContainer = styled.div`\n\toverflow: auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tborder-right: 1px solid\n\t\t${({ theme }: { theme: ITheme }) => theme.palette.neutralLighter};\n`\n\nexport const Container = styled.div<{ collapsed: boolean }>`\n\theight: 100%;\n\tdisplay: grid;\n\tgrid-template-columns: ${({ collapsed }) =>\n\t\tcollapsed ? '100% 0' : 'calc(100% - 280px) 280px '};\n`\n\nexport const buttonStyles = {\n\twrapper: {\n\t\tpadding: '10px 0px',\n\t\theight: '50%',\n\t\tbackgroundColor: 'inherit',\n\t},\n}\n\nexport function useTableHeaderColors(): Partial<CommandBarColors> {\n\tconst theme = useTheme()\n\treturn useMemo(\n\t\t() => ({\n\t\t\tbackground: theme.palette.white,\n\t\t\tborder: theme.palette.neutralTertiaryAlt,\n\t\t}),\n\t\t[theme],\n\t)\n}\n\nexport function useCommandBarStyles(): ICommandBarStyles {\n\treturn useMemo(\n\t\t() => ({\n\t\t\troot: {\n\t\t\t\theight: HEADER_HEIGHT - 1,\n\t\t\t},\n\t\t}),\n\t\t[],\n\t)\n}\n\nexport function useTableHeaderStyles(): ArqueroTableHeaderStyles {\n\tconst colors = useTableHeaderColors()\n\treturn useMemo(\n\t\t() => ({\n\t\t\troot: {\n\t\t\t\theight: HEADER_HEIGHT,\n\t\t\t\tborderBottom: `1px solid ${colors.border}`,\n\t\t\t},\n\t\t}),\n\t\t[colors],\n\t)\n}\n\nexport function useTableCommandProps(): Partial<TableCommandsProps> {\n\tconst colors = useTableHeaderColors()\n\tconst styles = useCommandBarStyles()\n\treturn useMemo(\n\t\t() => ({\n\t\t\tbackground: colors.background,\n\t\t\tcommandBarProps: {\n\t\t\t\tstyles,\n\t\t\t},\n\t\t}),\n\t\t[colors, styles],\n\t)\n}\n\nexport function useToolPanelStyles(): ToolPanelStyles {\n\tconst colors = useTableHeaderColors()\n\treturn useMemo(\n\t\t() => ({\n\t\t\troot: {\n\t\t\t\tborderLeft: `1px solid ${colors.border}`,\n\t\t\t},\n\t\t\theader: {\n\t\t\t\theight: HEADER_HEIGHT,\n\t\t\t\tbackground: colors.background,\n\t\t\t\tborderBottom: `1px solid ${colors.border}`,\n\t\t\t},\n\t\t}),\n\t\t[colors],\n\t)\n}\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from 'styled-components'\n\nexport const Container = styled.footer`\n\twidth: 100%;\n\theight: 32px;\n\tfont-size: 12px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\tgap: 18px;\n\talign-items: center;\n\tcolor: ${({ theme }) => theme.palette.neutralTertiary};\n\tbackground: ${({ theme }) => theme.palette.neutralLight};\n\tborder-top: 1px solid ${({ theme }) => theme.palette.neutralTertiaryAlt};\n`\n\nexport const constants = {\n\tprivacyUrl: 'https://go.microsoft.com/fwlink/?LinkId=521839',\n\ttermsOfUseUrl: 'https://go.microsoft.com/fwlink/?LinkID=206977',\n\ttrademarksUrl: 'https://www.microsoft.com/trademarks',\n\tmicrosoft: 'https://www.microsoft.com',\n\tcopyright: `©️ ${new Date().getFullYear()} Microsoft`,\n}\n\nexport const LinkDiv = styled.div`\n\tcursor: pointer;\n`\nexport const LinkA = styled.a`\n\tcursor: pointer;\n\ttext-decoration: none !important;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { useMicrosoftConsentBanner } from '@essex/hooks'\nimport { useTheme } from '@fluentui/react'\nimport type { FC } from 'react'\nimport { memo } from 'react'\n\nimport { constants, Container, LinkA, LinkDiv } from './Footer.styles.js'\n\nexport const Footer: FC = memo(function Footer() {\n\tconst theme = useTheme()\n\tconst CONSENT_CONF = {\n\t\ttheme: theme.isInverted ? 'dark' : 'light',\n\t\telementId: 'cookie-banner',\n\t\tonChange: (c: any) => console.log('consent changed', c),\n\t}\n\tconst [, manageConsent] = useMicrosoftConsentBanner(CONSENT_CONF)\n\n\treturn (\n\t\t<Container>\n\t\t\t<Link href={constants.privacyUrl}>Privacy</Link>\n\t\t\t{' | '}\n\t\t\t<Link\n\t\t\t\tid={'managecookies'}\n\t\t\t\tonClick={manageConsent}\n\t\t\t\tstyle={{ color: theme.palette.themePrimary }}\n\t\t\t>\n\t\t\t\tCookies\n\t\t\t</Link>\n\t\t\t{' | '}\n\t\t\t<Link href={constants.termsOfUseUrl}>Terms of Use</Link>\n\t\t\t{' | '}\n\t\t\t<Link href={constants.trademarksUrl}>Trademarks</Link>\n\t\t\t{' | '}\n\t\t\t<Link href={constants.microsoft}>{constants.copyright}</Link>\n\t\t</Container>\n\t)\n})\n\nconst Link: FC<\n\tReact.PropsWithChildren<{\n\t\thref?: string\n\t\tid?: string\n\t\tclassName?: string\n\t\tstyle?: React.CSSProperties\n\t\tonClick?: () => void\n\t}>\n> = memo(function Link({ id, className, children, href, style, onClick }) {\n\treturn href == null ? (\n\t\t<LinkDiv style={style} className={className} id={id} onClick={onClick}>\n\t\t\t{children}\n\t\t</LinkDiv>\n\t) : (\n\t\t<LinkA\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noreferrer\"\n\t\t\thref={href}\n\t\t\tstyle={style}\n\t\t\tclassName={className}\n\t\t\tid={id}\n\t\t>\n\t\t\t{children}\n\t\t</LinkA>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { FontIcon } from '@fluentui/react'\nimport styled from 'styled-components'\n\n// always ensure the header is dark, regardless of mode\nexport const Container = styled.div`\n\tpadding: 0 16px 0 16px;\n\tbackground: ${({ theme }) =>\n\t\ttheme.isInverted\n\t\t\t? theme.palette.neutralQuaternary\n\t\t\t: theme.palette.neutralPrimary};\n\tborder-bottom: 1px solid\n\t\t${({ theme }) =>\n\t\t\ttheme.isInverted\n\t\t\t\t? theme.palette.neutralTertiary\n\t\t\t\t: theme.palette.neutralSecondary};\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\theight: 42px;\n`\n\nexport const Title = styled.h1`\n\ttext-transform: uppercase;\n\tfont-size: 25px;\n\talign-self: center;\n\tmargin: 0;\n\tpadding: 0;\n\tcolor: ${({ theme }) =>\n\t\ttheme.isInverted\n\t\t\t? theme.palette.neutralSecondary\n\t\t\t: theme.palette.neutralTertiaryAlt};\n`\n\nexport const StyledFontIcon = styled(FontIcon)`\n\tfont-size: 18px;\n\theight: 18px;\n\twidth: 18px;\n\tcursor: pointer;\n\tcolor: ${({ theme }) =>\n\t\ttheme.isInverted ? theme.palette.neutralPrimary : theme.palette.white};\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport { memo } from 'react'\n\nimport { Container, StyledFontIcon, Title } from './Header.styles.js'\nimport type { HeaderProps } from './Header.types.js'\n\nexport const Header: React.FC<HeaderProps> = memo(function Header({\n\tonSettingsClick,\n}) {\n\treturn (\n\t\t<Container>\n\t\t\t<Title>DataShaper</Title>\n\t\t\t<StyledFontIcon\n\t\t\t\taria-label=\"Settings\"\n\t\t\t\ticonName=\"Settings\"\n\t\t\t\tonClick={onSettingsClick}\n\t\t\t/>\n\t\t</Container>\n\t)\n})\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport styled from 'styled-components'\n\nexport const SettingsSection = styled.div`\n\tmargin-left: 10px;\n`\n\nexport const H3 = styled.h3`\n\tmargin-bottom: 10px;\n`\n\nexport const HelpSection = styled.div`\n\tmargin-left: 10px;\n\tmargin-top: 20px;\n`\n\nexport const Heading = styled.h2`\n\tmargin-bottom: 10px;\n`\n\nexport const Container = styled.div`\n\tmargin: 8px;\n`\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\n\nimport { Guidance } from '@datashaper/react'\nimport { Panel, Toggle } from '@fluentui/react'\nimport { memo, useCallback } from 'react'\n\nimport { useGuidanceIndex } from '../hooks/index.js'\nimport { useSettings } from '../states/settings.js'\nimport { useSetDarkMode } from './SettingsPanel.hooks.js'\nimport { H3, HelpSection, SettingsSection } from './SettingsPanel.styles.js'\nimport type { SettingsPanelProps } from './SettingsPanel.types.js'\n\nexport const SettingsPanel: React.FC<SettingsPanelProps> = memo(\n\tfunction SettingsPanel({ isOpen, onDismiss }: SettingsPanelProps) {\n\t\tconst index = useGuidanceIndex()\n\t\tconst [settings, setSettings] = useSettings()\n\t\tconst setDarkMode = useSetDarkMode(settings, setSettings)\n\t\tconst handleDarkModeChange = useCallback(\n\t\t\t(_ev: unknown, checked?: boolean) => void setDarkMode(checked),\n\t\t\t[setDarkMode],\n\t\t)\n\n\t\treturn (\n\t\t\t<Panel\n\t\t\t\tisLightDismiss\n\t\t\t\tisOpen={isOpen}\n\t\t\t\tonDismiss={onDismiss}\n\t\t\t\tcloseButtonAriaLabel=\"Close\"\n\t\t\t\theaderText=\"Menu\"\n\t\t\t>\n\t\t\t\t<SettingsSection>\n\t\t\t\t\t<H3>Settings</H3>\n\t\t\t\t\t<Toggle\n\t\t\t\t\t\tlabel=\"Dark Mode\"\n\t\t\t\t\t\tonText=\"On\"\n\t\t\t\t\t\toffText=\"Off\"\n\t\t\t\t\t\tonChange={handleDarkModeChange}\n\t\t\t\t\t\tchecked={settings.isDarkMode}\n\t\t\t\t\t/>\n\t\t\t\t</SettingsSection>\n\n\t\t\t\t<HelpSection>\n\t\t\t\t\t<H3>Help</H3>\n\t\t\t\t\t<Guidance name={'prepareDataPage'} index={index} />\n\t\t\t\t</HelpSection>\n\t\t\t</Panel>\n\t\t)\n\t},\n)\n","/*!\n * Copyright (c) Microsoft. All rights reserved.\n * Licensed under the MIT license. See LICENSE file in the project.\n */\nimport 'allotment/dist/style.css'\n\nimport { type ProfilePlugin, DataShaperApp } from '@datashaper/app-framework'\nimport { Spinner } from '@fluentui/react'\nimport { useConst } from '@fluentui/react-hooks'\nimport { memo, Suspense } from 'react'\nimport { HashRouter } from 'react-router-dom'\nimport { RecoilRoot } from 'recoil'\n\nimport { Layout } from '../components/Layout.js'\nimport { TestAppProfile } from '../profiles/index.js'\nimport { About } from './About.js'\nimport { ErrorBoundary } from './ErrorBoundary.js'\nimport { StyleContext } from './StyleContext.js'\n\nexport const App: React.FC = memo(function App() {\n\tconst customProfiles = useConst<ProfilePlugin[]>(() => [new TestAppProfile()])\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<RecoilRoot>\n\t\t\t\t<HashRouter>\n\t\t\t\t\t<Suspense fallback={<Spinner />}>\n\t\t\t\t\t\t<StyleContext>\n\t\t\t\t\t\t\t<Layout>\n\t\t\t\t\t\t\t\t<DataShaperApp examples={examples} profiles={customProfiles}>\n\t\t\t\t\t\t\t\t\t<About />\n\t\t\t\t\t\t\t\t</DataShaperApp>\n\t\t\t\t\t\t\t</Layout>\n\t\t\t\t\t\t</StyleContext>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</HashRouter>\n\t\t\t</RecoilRoot>\n\t\t</ErrorBoundary>\n\t)\n})\n\nconst examples = [\n\t{ name: 'Smoking', url: 'examples/smoking.json' },\n\t{ name: 'Companies', url: 'examples/companies.json' },\n]\n"],"names":[],"sourceRoot":""}